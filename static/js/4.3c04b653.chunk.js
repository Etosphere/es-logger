(this["webpackJsonpes-logger"]=this["webpackJsonpes-logger"]||[]).push([[4],{477:function(e,t,n){"use strict";n.r(t),n.d(t,"Start",(function(){return Ke})),n.d(t,"StartPrime",(function(){return Ue})),n.d(t,"Block",(function(){return Ve})),n.d(t,"BlockBegin",(function(){return Ge})),n.d(t,"BlockEnd",(function(){return Je})),n.d(t,"ACC",(function(){return Qe})),n.d(t,"Action",(function(){return Xe})),n.d(t,"Command",(function(){return Ye})),n.d(t,"Comment",(function(){return Ze}));var r=n(17),a=n(153),o=n(33),l=n(28),i=n(181),c=n(180),s=n(0),h=n.n(s),d=n(267),u=n.n(d),p=n(471),b=n(146),m=n(470),g=n(112),j=n(466),f=n(436),x=n.n(f),O=n(437),y=n.n(O),v=n(24),k="block-begin",T="block-end",C="action",R="command",w="comment",F=function e(t,n,r,o){Object(a.a)(this,e),this.id=t,this.type=n,this.roleID=r,this.content=o},I=function e(t,n,r,o){Object(a.a)(this,e),this.id=t,this.name=n,this.type=r,this.color=o},S=function(){function e(){Object(a.a)(this,e),this.table={},this.nextRoleID=0}return Object(o.a)(e,[{key:"getName",value:function(e){if(e>=0&&e<this.nextRoleID)return this.table[e].name}},{key:"setName",value:function(e,t){e>=0&&e<this.nextRoleID&&(this.table[e].name=t)}},{key:"getType",value:function(e){if(e>=0&&e<this.nextRoleID)return this.table[e].type}},{key:"setType",value:function(e,t){e>=0&&e<this.nextRoleID&&(this.table[e].type=t)}},{key:"getColor",value:function(e){if(e>=0&&e<this.nextRoleID)return this.table[e].color}},{key:"setColor",value:function(e,t){e>=0&&e<this.nextRoleID&&(this.table[e].color=t)}},{key:"getRoleIdByName",value:function(e){for(var t=Object.values(this.table),n=0;n<t.length;n++)if(t[n].name===e)return t[n].id;return null}},{key:"addRole",value:function(e,t,n){var r=this.getRoleIdByName(e);return r||0===r?r:(this.table[this.nextRoleID]=new I(this.nextRoleID,e,t,n),this.nextRoleID+=1,this.nextRoleID-1)}}]),e}(),N=n(268),E=function(e,t,n,r,a,o,l,i){var c=function(e,t){return Math.round(Math.random()*(t-e))+e},s=c(e,t),h=c(n,r),d=c(a,o),u=c(100*l,100*i)/100;return"hsl(".concat(s,", ").concat(h,"%, ").concat(d,"%, ").concat(u,")")},L=function(){function e(t){Object(a.a)(this,e),this.rawLogData=t,this.tokenSequence=[],this.header={title:null,description:null,color:{},kp:null,dicer:null,show_command:!1,show_comment:!1},this.roleTable=new S}return Object(o.a)(e,[{key:"analyze",value:function(){var e=this,t=this.rawLogData.split("\n"),n=0,r="",a="",o=0;if("---"===t[0].trim())for(var l="",i=1;i<t.length;i++)"---"===t[i].trim()?(o=i+1,this.header=N.a.load(l)):l+=t[i]+"\n";if(t.slice(o).map((function(e){return e.trim()})).filter((function(e){return e})).forEach((function(t,o){var l=t.match(/<.+>/);if(l){if(""!==r){var i=e.roleTable.addRole(r,"pc",E(0,360,20,80,0,75,1,1));e.tokenSequence.push(new F(n,C,i,a)),a="",r="",n+=1}var c=(l=l[0]).slice(1,l.length-1);if("{"===c)e.tokenSequence.push(new F(n,k,null,null));else if("}"===c)e.tokenSequence.push(new F(n,T,null,null));else{var s=t.split(">")[1].trim(),h=e.roleTable.addRole(c,"pc",E(0,360,20,80,0,75,1,1));"("===s[0]||"\uff08"===s[0]?(e.tokenSequence.push(new F(n,w,h,s)),r=""):"."===s[0]?(e.tokenSequence.push(new F(n,R,h,s)),r=""):(a+=s,r=c,n-=1)}}else{var d=e.roleTable.addRole(r,"pc",E(0,360,20,80,0,75,1,1));"("===t[0]||"\uff08"===t[0]?(""!==a&&(e.tokenSequence.push(new F(n,C,d,a)),a="",n+=1),e.tokenSequence.push(new F(n,w,d,t))):"."===t[0]||"\u3002"===t[0]?(""!==a&&(e.tokenSequence.push(new F(n,C,d,a)),a=""),e.tokenSequence.push(new F(n,R,d,t))):(a+=""!==a?"\n"+t:t,n-=1)}n+=1})),""!==a){var c=this.roleTable.addRole(r,"pc",E(0,360,20,80,0,75,1,1));this.tokenSequence.push(new F(n,C,c,a)),a=""}return this.tokenSequence.push(new F(n+1,"eof",null,null)),this.header.color&&Object.entries(this.header.color).forEach((function(t){var n=Object(v.a)(t,2),r=n[0],a=n[1],o=e.roleTable.getRoleIdByName(r);null!==o&&e.roleTable.setColor(o,a)})),this.header.kp&&this.header.kp.forEach((function(t){var n=e.roleTable.getRoleIdByName(t);null!==n&&e.roleTable.setType(n,"kp")})),this.header.dicer&&this.header.dicer.forEach((function(t){var n=e.roleTable.getRoleIdByName(t);null!==n&&e.roleTable.setType(n,"dicer")})),this.tokenSequence}}]),e}(),M=n(461),A=n(481),D=n(467),B=n(463),z=n(468),P=n(478),q=n(480),H=n(482),W=n(460),_=n(250),K=n.n(_),U=n(464),V=n(458),G=n(459),J=n(469),Q=n(465),X=n(457),Y=n(411),Z=n.n(Y),$=n(49),ee=n(143),te=n(479),ne=n(410),re=n.n(ne),ae=n(402),oe=n.n(ae),le=n(269),ie=n.n(le),ce=n(3),se=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState({color:e.hex})},r.state={color:r.props.color},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(ce.jsx)(oe.a,{variant:"popover",popupId:"color-picker-popup-popover",children:function(t){return Object(ce.jsxs)("div",{children:[Object(ce.jsx)(ee.a,Object($.a)(Object($.a)({style:{color:e.state.color,padding:9},edge:"end","aria-label":"change color",component:"span"},Object(ae.bindTrigger)(t)),{},{children:Object(ce.jsx)(re.a,{})})),Object(ce.jsx)(te.a,Object($.a)(Object($.a)({},Object(ae.bindPopover)(t)),{},{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:Object(ce.jsx)(ie.a,{color:e.state.color,onChange:e.handleChange,onChangeComplete:e.props.onChangeComplete,disableAlpha:!0})}))]})}})}}]),n}(h.a.Component),he={PaperProps:{style:{maxHeight:272,width:250}}},de=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(a.a)(this,n),r=t.call(this,e);var o=[],i=[];return Object.values(r.props.roleTable.table).forEach((function(e){"kp"===e.type?o.push(e.id.toString()):"dicer"===e.type&&i.push(e.id.toString())})),r.state={kpList:o,dicerList:i},r.handleKpChange=r.handleKpChange.bind(Object(l.a)(r)),r.handleDicerChange=r.handleDicerChange.bind(Object(l.a)(r)),r.handleRoleNameChange=r.handleRoleNameChange.bind(Object(l.a)(r)),r.handleColorChange=r.handleColorChange.bind(Object(l.a)(r)),r.handleRoleFilterChange=r.handleRoleFilterChange.bind(Object(l.a)(r)),r.handleCommandFilterChange=r.handleCommandFilterChange.bind(Object(l.a)(r)),r.handleCommentFilterChange=r.handleCommentFilterChange.bind(Object(l.a)(r)),r}return Object(o.a)(n,[{key:"handleKpChange",value:function(e){var t=this,n=this.props.roleTable,r=e.target.value;Object.keys(n.table).forEach((function(e){n.setType(e,"pc")})),r.forEach((function(e){n.setType(e,"kp")})),this.state.dicerList.forEach((function(e){n.setType(e,"dicer")})),this.setState({kpList:r},(function(){t.props.onRoleTableChange(n)}))}},{key:"handleDicerChange",value:function(e){var t=this,n=this.props.roleTable,r=e.target.value;Object.keys(n.table).forEach((function(e){n.setType(e,"pc")})),this.state.kpList.forEach((function(e){n.setType(e,"kp")})),r.forEach((function(e){n.setType(e,"dicer")})),this.setState({dicerList:r},(function(){t.props.onRoleTableChange(n)}))}},{key:"handleRoleNameChange",value:function(e,t){var n=this.props.roleTable;n.setName(e,t),this.props.onRoleTableChange(n)}},{key:"handleColorChange",value:function(e,t){var n=this.props.roleTable;n.setColor(e,t),this.props.onRoleTableChange(n)}},{key:"handleRoleFilterChange",value:function(e){var t=this.props.logFilter;t.role[e]=!t.role[e],this.props.onFilterChange(t)}},{key:"handleCommandFilterChange",value:function(){var e=this.props.logFilter;e.command=!e.command,this.props.onFilterChange(e),this.setState({logFilter:e})}},{key:"handleCommentFilterChange",value:function(){var e=this.props.logFilter;e.comment=!e.comment,this.props.onFilterChange(e)}},{key:"render",value:function(){var e=this,t=this.props.classes,n=Object.keys(this.props.roleTable.table).filter((function(t){return"kp"===e.props.roleTable.getType(t)})),r=Object.keys(this.props.roleTable.table).filter((function(t){return"dicer"===e.props.roleTable.getType(t)})),a=Object.keys(this.props.roleTable.table).filter((function(t){return"pc"===e.props.roleTable.getType(t)})),o=function(t,n){return Object(ce.jsx)(X.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(ce.jsxs)(V.a,{style:{justifyContent:"center"},children:[Object(ce.jsx)(G.a,{style:{minWidth:0,paddingLeft:9,paddingRight:9},children:Object(ce.jsx)(q.a,{edge:"start",onClick:function(){return e.handleRoleFilterChange(t)},checked:e.props.logFilter.role[t],disabled:n})}),Object(ce.jsx)(W.a,{id:"text-field-role"+t,color:"secondary",InputProps:{style:{color:e.props.roleTable.getColor(t)}},fullWidth:!0,error:!e.props.roleTable.getName(t),value:e.props.roleTable.getName(t),onChange:function(n){e.handleRoleNameChange(t,n.target.value)}},"text-"+t),Object(ce.jsx)(G.a,{style:{minWidth:0,paddingLeft:9,paddingRight:9},children:Object(ce.jsx)(se,{id:t,color:e.props.roleTable.getColor(t),onChangeComplete:function(n){e.handleColorChange(t,n.hex)}})},"icon-"+t)]},t)},t)};return[Object(ce.jsxs)(j.a,{container:!0,children:[Object(ce.jsx)(j.a,{item:!0,xs:!0,align:"right",children:Object(ce.jsx)(g.a,{in:!0,timeout:1500,children:Object(ce.jsxs)(B.a,{className:t.formControl,children:[Object(ce.jsx)(A.a,{id:"kp-selection-checkbox-label",children:"Select KP"}),Object(ce.jsx)(P.a,{labelId:"kp-selection-checkbox-label",id:"kp-selection-checkbox",multiple:!0,error:0===this.state.kpList.length,value:this.state.kpList,onChange:this.handleKpChange,input:Object(ce.jsx)(M.a,{}),renderValue:function(n){return Object(ce.jsx)("div",{className:t.chips,children:n.map((function(n){return Object(ce.jsx)(H.a,{label:e.props.roleTable.getName(n),className:t.chip,size:"small"},n)}))})},MenuProps:he,children:Object.keys(this.props.roleTable.table).map((function(t){return e.state.dicerList.includes(t)?null:Object(ce.jsxs)(D.a,{value:t,children:[Object(ce.jsx)(q.a,{checked:e.state.kpList.includes(t)}),Object(ce.jsx)(z.a,{primary:e.props.roleTable.getName(t)})]},t)}))}),Object(ce.jsx)(Q.a,{error:!0,hidden:0!==this.state.kpList.length,children:"Must set at least one kp."})]})})}),Object(ce.jsx)(j.a,{item:!0,xs:!0,align:"left",children:Object(ce.jsx)(g.a,{in:!0,timeout:1500,children:Object(ce.jsxs)(B.a,{className:t.formControl,children:[Object(ce.jsx)(A.a,{id:"dicer-selection-checkbox-label",children:"Select dicer"}),Object(ce.jsx)(P.a,{labelId:"dicer-selection-checkbox-label",id:"dicer-selection-checkbox",multiple:!0,error:0===this.state.dicerList.length,value:this.state.dicerList,onChange:this.handleDicerChange,input:Object(ce.jsx)(M.a,{}),renderValue:function(n){return Object(ce.jsx)("div",{className:t.chips,children:n.map((function(n){return Object(ce.jsx)(H.a,{label:e.props.roleTable.getName(n),className:t.chip,size:"small"},n)}))})},MenuProps:he,children:Object.keys(this.props.roleTable.table).map((function(t){return e.state.kpList.includes(t)?null:Object(ce.jsxs)(D.a,{value:t,children:[Object(ce.jsx)(q.a,{checked:e.state.dicerList.includes(t)}),Object(ce.jsx)(z.a,{primary:e.props.roleTable.getName(t)})]},t)}))}),Object(ce.jsx)(Q.a,{error:!0,hidden:0!==this.state.dicerList.length,children:"Must set at least one dicer."})]})})})]},"kp-and-dicer-configurator-grid"),Object(ce.jsx)(j.a,{container:!0,children:Object(ce.jsx)(j.a,{item:!0,xs:!0,align:"center",children:Object(ce.jsx)(g.a,{in:!0,timeout:1500,children:Object(ce.jsxs)(U.a,{dense:!0,style:{maxWidth:"360px"},children:[0!==n.length&&Object(ce.jsx)(g.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(ce.jsx)(J.a,{disableSticky:!0,style:{lineHeight:"28px"},children:"KP"},"kp")},"kp"),n.map((function(e){return o(e,!0)})),0!==r.length&&Object(ce.jsx)(g.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(ce.jsx)(J.a,{disableSticky:!0,style:{lineHeight:"28px"},children:"Dicer"},"dicer")},"dicer"),r.map((function(e){return o(e,!0)})),0!==a.length&&Object(ce.jsx)(g.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(ce.jsx)(J.a,{disableSticky:!0,style:{lineHeight:"28px"},children:"PC"},"pc")},"pc"),a.map((function(e){return o(e,!1)})),Object(ce.jsx)(m.a,{variant:"middle"},"divider"),Object(ce.jsx)(X.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(ce.jsxs)(V.a,{button:!0,onClick:this.handleCommandFilterChange,children:[Object(ce.jsx)(G.a,{children:Object(ce.jsx)(q.a,{edge:"start",checked:this.props.logFilter.command},"command-checkbox")},"command-icon"),Object(ce.jsx)(z.a,{id:"label-command",primary:"Show Command"},"label-command")]},"command")},"command-checkbox"),Object(ce.jsx)(X.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(ce.jsxs)(V.a,{button:!0,onClick:this.handleCommentFilterChange,children:[Object(ce.jsx)(G.a,{children:Object(ce.jsx)(q.a,{edge:"start",checked:this.props.logFilter.comment},"comment-checkbox")},"comment-icon"),Object(ce.jsx)(z.a,{id:"label-comment",primary:"Show Comment"},"label-comment")]},"comment")},"comment-checkbox")]})})})},"name-and-color-configurator-grid"),Object(ce.jsx)(j.a,{container:!0,style:{marginBottom:"1em"},children:Object(ce.jsx)(j.a,{item:!0,xs:!0,align:"center",children:Object(ce.jsx)(p.a,{variant:0===this.state.kpList.length&&0===this.state.dicerList.length?"outlined":"contained",color:"secondary",disabled:0===this.state.kpList.length||0===this.state.dicerList.length,endIcon:Object(ce.jsx)(Z.a,{}),onClick:this.props.onSubmit,children:"Render"},"render-button")})},"apply-button-grid")]}}]),n}(h.a.Component),ue=K()((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:240},chips:{display:"flex",flexWrap:"wrap"},chip:{marginTop:2,marginRight:2,marginBottom:2,maxWidth:100,overflow:"hidden",label:{overflow:"hidden"}},noLabel:{marginTop:e.spacing(3)}}}),{withTheme:!0})(de),pe=n(472),be=n(111),me=n(483),ge=n(473),je=n(433),fe=n.n(je),xe=n(431),Oe=n.n(xe),ye=n(432),ve=n.n(ye),ke=n(412),Te=n(429),Ce=n.n(Te),Re=n(430),we=n.n(Re);function Fe(e){var t=[];e.header.title&&t.push(new ke.Paragraph({text:e.header.title,heading:ke.HeadingLevel.HEADING_1})),e.header.description&&e.header.description.split("\n").forEach((function(e){t.push(new ke.Paragraph({children:[new ke.TextRun({text:e.trim(),color:"666666"})]}))}));!function n(r){if(r.type!==Ve)r.content&&t.push(new ke.Paragraph({children:[new ke.TextRun({text:"<".concat(e.roleTable.getName(r.role),"> ").concat(r.content),color:e.roleTable.getColor(r.role).substring(1)})]}));else if(Array.isArray(r.children))if(r.collapsed){var a=r.role.map((function(t){return"pc"===e.roleTable.getType(t)?e.roleTable.getName(t):null})).filter((function(e){return e}));t.push(new ke.Paragraph({heading:ke.HeadingLevel.HEADING_2,text:"{".concat(a.join(", "),"}")})),r.children.forEach((function(e){return n(e)}))}else r.children.forEach((function(e){return n(e)}))}(e.data);var n=new ke.Document({styles:{paragraphStyles:[{id:"Heading1",name:"Heading 1",basedOn:"Normal",next:"Normal",run:{bold:!0,size:32,color:"000000"},paragraph:{spacing:{after:120}}},{id:"Heading2",name:"Heading 2",basedOn:"Normal",next:"Normal",run:{size:26,color:"888888"}},{id:"Normal",name:"Normal",basedOn:"Normal",next:"Normal",run:{size:24},paragraph:{spacing:{line:288}}}]},sections:[{children:t}]});return Object(ce.jsx)(p.a,{color:"secondary",variant:"outlined",size:"small",style:{marginBottom:"2px"},endIcon:Object(ce.jsx)(we.a,{}),onClick:function(){ke.Packer.toBlob(n).then((function(t){Ce.a.saveAs(t,e.header.title?e.header.title+".docx":"rendered-log.docx")}))},children:"Save to docx"})}var Ie=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).collapsibleNodeArray=[],r.state={expanded:[]},r.handleToggle=r.handleToggle.bind(Object(l.a)(r)),r.collapseAll=r.collapseAll.bind(Object(l.a)(r)),r.expandAll=r.expandAll.bind(Object(l.a)(r)),r.initializeCollapsibleNodeArray(),r}return Object(o.a)(n,[{key:"initializeCollapsibleNodeArray",value:function(){var e=this;!function t(n){n.type===Ve&&Array.isArray(n.children)&&(n.collapsed&&e.collapsibleNodeArray.push(n.id.toString()),n.children.forEach((function(e){return t(e)})))}(this.props.node)}},{key:"handleToggle",value:function(e,t){this.setState({expanded:t})}},{key:"collapseAll",value:function(){this.setState({expanded:[]})}},{key:"expandAll",value:function(){this.setState({expanded:this.collapsibleNodeArray})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=K()({root:{"&.MuiTreeItem-root:focus > .MuiTreeItem-content .MuiTreeItem-label":{background:"transparent"},"&.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label":{background:"transparent"},"&.MuiTreeItem-root > .MuiTreeItem-content:hover":{background:"transparent"},"&.MuiTreeItem-root > .MuiTreeItem-content:hover > .MuiTreeItem-label":{background:"transparent"}},group:{marginLeft:7,paddingLeft:18,borderLeft:"1px dashed #33333333"}})(me.a);return this.props.node?[this.props.header.title&&Object(ce.jsx)(be.a,{variant:"h4",style:{marginTop:"16px",marginBottom:"16px"},children:this.props.header.title},"title"),this.props.header.description&&Object(ce.jsx)(be.a,{variant:"subtitle1",style:{whiteSpace:"pre-line",marginBottom:"16px",paddingLeft:"2em",paddingRight:"2em",color:"#888888"},children:this.props.header.description},"description"),Object(ce.jsxs)(j.a,{container:!0,spacing:2,style:{marginBottom:"12px"},children:[Object(ce.jsx)(j.a,{item:!0,xs:12,sm:8,children:Object(ce.jsxs)(pe.a,{variant:"outlined",size:"small",color:"primary",children:[Object(ce.jsx)(p.a,{onClick:this.expandAll,children:"Expand all"}),Object(ce.jsx)(p.a,{onClick:this.collapseAll,children:"Collapse all"})]},"button-group")},"expand-and-collapse-button-group"),Object(ce.jsx)(j.a,{item:!0,xs:12,sm:4,align:"right",children:Object(ce.jsx)(Fe,{data:this.props.node,roleTable:this.props.roleTable,header:this.props.header},"save-to-docx-button")},"save-to-docx-button")]},"buttons-grid"),Object(ce.jsx)(ge.a,{className:t.root,defaultCollapseIcon:Object(ce.jsx)(ve.a,{}),defaultExpanded:["root"],defaultExpandIcon:Object(ce.jsx)(fe.a,{}),disableSelection:!0,expanded:this.state.expanded,onNodeToggle:this.handleToggle,style:{marginBottom:"48px"},children:function t(r){if(r.type===Ve){if(Array.isArray(r.children)){if(r.collapsed){var a=r.role.map((function(t){return"pc"===e.props.roleTable.getType(t)?e.props.roleTable.getName(t):null})).filter((function(e){return e})),o=Object(ce.jsx)(be.a,{style:{color:"#a2a2a2"},children:"{".concat(a.join(", "),"}")});return Object(ce.jsxs)(n,{nodeId:r.id.toString(),label:o,children:[r.children.map((function(e){return t(e)})),Object(ce.jsx)(n,{nodeId:r.id.toString()+"-collapse",label:Object(ce.jsx)(be.a,{style:{color:"#a2a2a2"},children:"Click to Collapse"}),endIcon:Object(ce.jsx)(Oe.a,{}),onLabelClick:function(t){var n=e.state.expanded;n.splice(n.indexOf(r.id.toString()),1),e.handleToggle(t,n)}},r.id.toString()+"-collapse")]},r.id)}return r.children.map((function(e){return t(e)}))}return null}if(r.content)return Object(ce.jsx)(be.a,{style:{color:e.props.roleTable.getColor(r.role),whiteSpace:"pre-line"},children:"<".concat(e.props.roleTable.getName(r.role),"> ").concat(r.content)},r.id)}(this.props.node)},"render-tree")]:null}}]),n}(h.a.Component),Se=K()((function(e){return{"@global":{".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label":{backgroundColor:"white"},".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label:hover, .MuiTreeItem-root.Mui-selected:focus > .MuiTreeItem-content .MuiTreeItem-label":{backgroundColor:"gray"}}}}),{withTheme:!0})(Ie),Ne=n(138),Ee=n(434),Le=n.n(Ee),Me=n(475),Ae=n(474),De=n(435),Be=n.n(De),ze=Le()((function(e){return{root:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3)}}}));function Pe(e){var t=e.children,n=ze(),r=Object(Ne.a)({disableHysteresis:!0,threshold:100});return Object(ce.jsx)(Ae.a,{in:r,children:Object(ce.jsx)("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:n.root,children:t})})}function qe(e){return Object(ce.jsx)(Pe,Object($.a)(Object($.a)({},e),{},{children:Object(ce.jsx)(Me.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(ce.jsx)(Be.a,{})})}))}var He=function(e,t){return e.children.push(t)},We=function e(t,n){Object(a.a)(this,e),this.type=t,this.content=n,this.children=[]},_e=function e(t,n,r,o){Object(a.a)(this,e),this.id=t,this.type=n,this.role=r,this.content=o,this.children=[]},Ke="Start",Ue="Start'",Ve="Block",Ge="block-begin",Je="block-end",Qe="ACC",Xe="action",Ye="command",Ze="comment",$e=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).header={show_command:!1,show_comment:!1},r.state={selectedFile:null,parseTreeRoot:null,syntaxTreeRoot:null,filteredTreeRoot:null,roleTable:null,logFilter:{},showRoleConfigurator:!1,showLogRender:!1},r.handleFileChange=r.handleFileChange.bind(Object(l.a)(r)),r.handleFileRead=r.handleFileRead.bind(Object(l.a)(r)),r.handleFileUpload=r.handleFileUpload.bind(Object(l.a)(r)),r.handleRoleTableChange=r.handleRoleTableChange.bind(Object(l.a)(r)),r.handleLogFilterChange=r.handleLogFilterChange.bind(Object(l.a)(r)),r.filterNodeByRole=r.filterNodeByRole.bind(Object(l.a)(r)),r}return Object(o.a)(n,[{key:"parse",value:function(e){var t=0,n=function(){return e[t]},r=function(){return t+=1},a=function e(t){var r=n();if(r.type===k){if(He(t,new We(Ve,null)),o(t.children[0]))return He(t,new We(Ue,null)),e(t.children[1])}else{if(r.type!==C&&r.type!==R&&r.type!==w)return!0;if(He(t,new We(Qe,null)),l(t.children[0]))return He(t,new We(Ue,null)),e(t.children[1])}},o=function(e){var t=n();if(t.type===k){if(He(e,new We(Ge,t)),r(),He(e,new We(Ue,null)),a(e.children[1])){if(He(e,new We(Je,n())),n().type===T)return r(),!0;console.log("Error parsing at ".concat(n(),", should be <block-end>."))}}else console.log("Error parsing at ".concat(n(),", should be <block-begin>."))},l=function(e){var t=n();return t.type===C?(He(e,new We(Xe,t)),r(),!0):t.type===R?(He(e,new We(Ye,t)),r(),!0):t.type===w?(He(e,new We(Ze,t)),r(),!0):(console.log("Error parsing at ".concat(t,", should be <action> or <command> or <comment>.")),!1)},i=new We(Ke);if(function(e){var t=n();if(t.type===k){if(He(e,new We(Ve,null)),o(e.children[0]))return He(e,new We(Ue,null)),a(e.children[1])}else{if(t.type!==C&&t.type!==R&&t.type!==w)return console.log("Error parsing at ".concat(t,".")),!1;if(He(e,new We(Qe,null)),l(e.children[0]))return He(e,new We(Ue,null)),a(e.children[1])}}(i))return i;console.log("Failed to parse the code.")}},{key:"buildSyntaxTree",value:function(e){var t=1,n=new _e(0,Ve,[],null);return function e(n,r){if(n){var a=function(e,n){if(e.type===Ve)He(n,new _e(t,Ve,[],null));else{if(e.type!==Xe&&e.type!==Ye&&e.type!==Ze)return!1;He(n,new _e(t,e.type,e.content.roleID,e.content.content))}return t+=1,n.children[n.children.length-1]}(n,r);a?n.children.forEach((function(t,n){return e(t,a)})):n.children.forEach((function(t,n){return e(t,r)}))}}(e,n),n}},{key:"updateRole",value:function(e){var t=this;if(e){if(e.type===Ve){var n=e.role;e.children.forEach((function(e,r){return n=n.concat(t.updateRole(e))})),e.role=Object(r.a)(new Set(n)).sort()}return e.role}return[]}},{key:"initializeLogFilter",value:function(){var e={};return this.state.syntaxTreeRoot.role.forEach((function(t){return e[t]=!0})),{role:e,command:this.header.show_command,comment:this.header.show_comment}}},{key:"handleFileChange",value:function(e){this.setState({selectedFile:e.target.files[0],parseTreeRoot:null,syntaxTreeRoot:null,filteredTreeRoot:null,roleTable:null,logFilter:{},showRoleConfigurator:!1,showLogRender:!1})}},{key:"handleFileRead",value:function(e){var t=this,n=e.target.result,r=new L(n),a=r.analyze();this.header=r.header;var o=this.parse(a),l=this.buildSyntaxTree(o);this.setState({parseTreeRoot:o,syntaxTreeRoot:l,roleTable:r.roleTable},(function(){t.updateRole(t.state.syntaxTreeRoot);var e=t.initializeLogFilter();t.setState({logFilter:e,showRoleConfigurator:!0})}))}},{key:"handleFileUpload",value:function(){var e=new FileReader;e.onload=this.handleFileRead,e.readAsText(this.state.selectedFile)}},{key:"handleRoleTableChange",value:function(e){this.setState({roleTable:e})}},{key:"handleLogFilterChange",value:function(e){this.setState({logFilter:e})}},{key:"filterNodeByRole",value:function(){var e=this,t=[];Object.keys(this.state.logFilter.role).forEach((function(n){"pc"===e.state.roleTable.getType(n)&&e.state.logFilter.role[n]&&t.push(n)})),t=t.map((function(e){return parseInt(e)}));var n=u.a.cloneDeep(this.state.syntaxTreeRoot);!function n(r,a){if(r)if(r.children.slice(0).forEach((function(e,t){return n(e,r)})),r.type===Ve){if(r.collapsed=(i=t,c=r.role,!i.every((function(e){return c.includes(e)}))),0===r.children.length&&a||function(e,t){return!e.map((function(e){return t.includes(e)})).includes(!0)}(r.role,t)){var o=a.children.findIndex((function(e){return e.id===r.id}));a.children.splice(o,1),r=null}}else if(r.collapsed=!1,r.type===Ye&&!e.state.logFilter.command||r.type===Ze&&!e.state.logFilter.comment){var l=a.children.findIndex((function(e){return e.id===r.id}));a.children.splice(l,1),r=null}var i,c}(n,null),this.updateRole(n),this.setState({filteredTreeRoot:n,showLogRender:!0})}},{key:"render",value:function(){return[Object(ce.jsx)("div",{id:"back-to-top-anchor"},"back-to-top-anchor"),Object(ce.jsx)(qe,{},"back-to-top-button"),Object(ce.jsxs)(j.a,{container:!0,spacing:1,direction:"column",style:{marginBottom:24},children:[Object(ce.jsxs)(j.a,{item:!0,xs:!0,align:"center",children:[Object(ce.jsx)("input",{hidden:!0,id:"contained-button-file",accept:"text/plain,.log",type:"file",onChange:this.handleFileChange}),Object(ce.jsx)("label",{htmlFor:"contained-button-file",children:Object(ce.jsx)(p.a,{variant:"outlined",color:"primary",component:"span",endIcon:Object(ce.jsx)(x.a,{}),children:"Browse"})})]}),this.state.selectedFile&&Object(ce.jsx)(g.a,{in:!0,timeout:1500,children:Object(ce.jsx)(j.a,{item:!0,xs:!0,align:"center",children:Object(ce.jsx)(p.a,{variant:"contained",color:"primary",component:"span",endIcon:Object(ce.jsx)(y.a,{}),onClick:this.handleFileUpload,children:"Submit"})})})]},"handle-file-grid"),Object(ce.jsx)(j.a,{container:!0,children:this.state.showRoleConfigurator&&Object(ce.jsx)(ue,{roleTable:u.a.cloneDeep(this.state.roleTable),logFilter:this.state.logFilter,header:this.header,onRoleTableChange:this.handleRoleTableChange,onFilterChange:this.handleLogFilterChange,onSubmit:this.filterNodeByRole},"role-configurator")},"role-configurator-grid"),Object(ce.jsx)(m.a,{hidden:!this.state.showLogRender},"divider"),Object(ce.jsx)(b.a,{maxWidth:"md",children:this.state.showLogRender&&Object(ce.jsx)(Se,{node:this.state.filteredTreeRoot,roleTable:this.state.roleTable,header:this.header},"render")},"log-render-container")]}}]),n}(h.a.Component);t.default=$e}}]);
//# sourceMappingURL=4.3c04b653.chunk.js.map