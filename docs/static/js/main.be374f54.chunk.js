(this["webpackJsonpes-logger"]=this["webpackJsonpes-logger"]||[]).push([[0],{278:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(13),l=n.n(a),r=n(148),c=n(351),s=n(352),d=n(350),h=n(353),u=n(27),p=n(18),b=n(12),m=n(36),g=n(35),j=n(16),f=n(102),x=n.n(f),O=n(331),y=n(284),v=n(332),C=n(336),k=n(348),T=n(349),w=n(15),S=Symbol("block-begin"),R=Symbol("block-end"),F=Symbol("action"),I=Symbol("command"),L=Symbol("comment"),N=Symbol("eof"),E=function e(t,n,o,i){Object(j.a)(this,e),this.id=t,this.type=n,this.roleID=o,this.content=i},M=function e(t,n,o,i){Object(j.a)(this,e),this.id=t,this.name=n,this.type=o,this.color=i},A=function(){function e(){Object(j.a)(this,e),this.table={},this.nextRoleID=0}return Object(p.a)(e,[{key:"getName",value:function(e){if(e>=0&&e<this.nextRoleID)return this.table[e].name}},{key:"setName",value:function(e,t){e>=0&&e<this.nextRoleID&&(this.table[e].name=t)}},{key:"getType",value:function(e){if(e>=0&&e<this.nextRoleID)return this.table[e].type}},{key:"setType",value:function(e,t){e>=0&&e<this.nextRoleID&&(this.table[e].type=t)}},{key:"getColor",value:function(e){if(e>=0&&e<this.nextRoleID)return this.table[e].color}},{key:"setColor",value:function(e,t){e>=0&&e<this.nextRoleID&&(this.table[e].color=t)}},{key:"getRoleIdByName",value:function(e){for(var t=Object.values(this.table),n=0;n<t.length;n++)if(t[n].name===e)return t[n].id;return null}},{key:"addRole",value:function(e,t,n){var o=this.getRoleIdByName(e);return o||0===o?o:(this.table[this.nextRoleID]=new M(this.nextRoleID,e,t,n),this.nextRoleID+=1,this.nextRoleID-1)}}]),e}(),D=n(141),B=function(e,t,n,o,i,a,l,r){var c=function(e,t){return Math.round(Math.random()*(t-e))+e},s=c(e,t),d=c(n,o),h=c(i,a),u=c(100*l,100*r)/100;return"hsl(".concat(s,", ").concat(d,"%, ").concat(h,"%, ").concat(u,")")},W=function(){function e(t){Object(j.a)(this,e),this.rawLogData=t,this.tokenSequence=[],this.header={title:null,description:null,color:{},kp:null,dicer:null,show_command:!1,show_comment:!1},this.roleTable=new A}return Object(p.a)(e,[{key:"analyze",value:function(){var e=this,t=this.rawLogData.split("\n"),n=0,o="",i="",a=0;if("---"===t[0].trim())for(var l="",r=1;r<t.length;r++)"---"===t[r].trim()?(a=r+1,this.header=D.a.load(l)):l+=t[r]+"\n";if(t.slice(a).map((function(e){return e.trim()})).filter((function(e){return e})).forEach((function(t,a){var l=t.match(/<.+>/);if(l){if(""!==o){var r=e.roleTable.addRole(o,"pc",B(0,360,20,80,0,75,1,1));e.tokenSequence.push(new E(n,F,r,i)),i="",o="",n+=1}var c=(l=l[0]).slice(1,l.length-1);if("{"===c)e.tokenSequence.push(new E(n,S,null,null));else if("}"===c)e.tokenSequence.push(new E(n,R,null,null));else{var s=t.split(">")[1].trim(),d=e.roleTable.addRole(c,"pc",B(0,360,20,80,0,75,1,1));"("===s[0]||"\uff08"===s[0]?(e.tokenSequence.push(new E(n,L,d,s)),o=""):"."===s[0]?(e.tokenSequence.push(new E(n,I,d,s)),o=""):(i+=s,o=c,n-=1)}}else{var h=e.roleTable.addRole(o,"pc",B(0,360,20,80,0,75,1,1));"("===t[0]||"\uff08"===t[0]?(""!==i&&(e.tokenSequence.push(new E(n,F,h,i)),i="",n+=1),e.tokenSequence.push(new E(n,L,h,t))):"."===t[0]||"\u3002"===t[0]?(""!==i&&(e.tokenSequence.push(new E(n,F,h,i)),i=""),e.tokenSequence.push(new E(n,I,h,t))):(i+=""!==i?"\n"+t:t,n-=1)}n+=1})),""!==i){var c=this.roleTable.addRole(o,"pc",B(0,360,20,80,0,75,1,1));this.tokenSequence.push(new E(n,F,c,i)),i=""}return this.tokenSequence.push(new E(n+1,N,null,null)),this.header.color&&Object.entries(this.header.color).forEach((function(t){var n=Object(w.a)(t,2),o=n[0],i=n[1],a=e.roleTable.getRoleIdByName(o);null!==a&&e.roleTable.setColor(a,i)})),this.header.kp&&this.header.kp.forEach((function(t){var n=e.roleTable.getRoleIdByName(t);null!==n&&e.roleTable.setType(n,"kp")})),this.header.dicer&&this.header.dicer.forEach((function(t){var n=e.roleTable.getRoleIdByName(t);null!==n&&e.roleTable.setType(n,"dicer")})),this.tokenSequence}}]),e}(),q=n(327),z=n(279),P=n(328),H=n(356),U=n(329),K=n(282),_=n(288),V=n(286),G=n(280),J=n(357),Y=n(333),Q=n(334),$=n(283),X=n(330),Z=n(335),ee=n(7),te=n(337),ne=n(38),oe=n(322),ie=n(355),ae=n(326),le=n(147),re=n(81),ce=n.n(re),se=n(3),de=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).handleChange=function(e){o.setState({color:e.hex})},o.state={color:o.props.color},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(se.jsx)(ce.a,{variant:"popover",popupId:"color-picker-popup-popover",children:function(t){return Object(se.jsxs)("div",{children:[Object(se.jsx)(oe.a,Object(ne.a)(Object(ne.a)({style:{color:e.state.color,padding:9},edge:"end","aria-label":"change color",component:"span"},Object(re.bindTrigger)(t)),{},{children:Object(se.jsx)(ae.a,{})})),Object(se.jsx)(ie.a,Object(ne.a)(Object(ne.a)({},Object(re.bindPopover)(t)),{},{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:Object(se.jsx)(le.a,{color:e.state.color,onChange:e.handleChange,onChangeComplete:e.props.onChangeComplete,disableAlpha:!0})}))]})}})}}]),n}(i.a.Component),he={PaperProps:{style:{maxHeight:272,width:250}}},ue=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var o;Object(j.a)(this,n),o=t.call(this,e);var i=[],a=[];return Object.values(o.props.roleTable.table).forEach((function(e){"kp"===e.type?i.push(e.id.toString()):"dicer"===e.type&&a.push(e.id.toString())})),o.state={kpList:i,dicerList:a},o.handleKpChange=o.handleKpChange.bind(Object(b.a)(o)),o.handleDicerChange=o.handleDicerChange.bind(Object(b.a)(o)),o.handleRoleNameChange=o.handleRoleNameChange.bind(Object(b.a)(o)),o.handleColorChange=o.handleColorChange.bind(Object(b.a)(o)),o.handleRoleFilterChange=o.handleRoleFilterChange.bind(Object(b.a)(o)),o.handleCommandFilterChange=o.handleCommandFilterChange.bind(Object(b.a)(o)),o.handleCommentFilterChange=o.handleCommentFilterChange.bind(Object(b.a)(o)),o}return Object(p.a)(n,[{key:"handleKpChange",value:function(e){var t=this,n=this.props.roleTable,o=e.target.value;Object.keys(n.table).forEach((function(e){n.setType(e,"pc")})),o.forEach((function(e){n.setType(e,"kp")})),this.state.dicerList.forEach((function(e){n.setType(e,"dicer")})),this.setState({kpList:o},(function(){t.props.onRoleTableChange(n)}))}},{key:"handleDicerChange",value:function(e){var t=this,n=this.props.roleTable,o=e.target.value;Object.keys(n.table).forEach((function(e){n.setType(e,"pc")})),this.state.kpList.forEach((function(e){n.setType(e,"kp")})),o.forEach((function(e){n.setType(e,"dicer")})),this.setState({dicerList:o},(function(){t.props.onRoleTableChange(n)}))}},{key:"handleRoleNameChange",value:function(e,t){var n=this.props.roleTable;n.setName(e,t),this.props.onRoleTableChange(n)}},{key:"handleColorChange",value:function(e,t){var n=this.props.roleTable;n.setColor(e,t),this.props.onRoleTableChange(n)}},{key:"handleRoleFilterChange",value:function(e){var t=this.props.logFilter;t.role[e]=!t.role[e],this.props.onFilterChange(t)}},{key:"handleCommandFilterChange",value:function(){var e=this.props.logFilter;e.command=!e.command,this.props.onFilterChange(e),this.setState({logFilter:e})}},{key:"handleCommentFilterChange",value:function(){var e=this.props.logFilter;e.comment=!e.comment,this.props.onFilterChange(e)}},{key:"render",value:function(){var e=this,t=this.props.classes,n=Object.keys(this.props.roleTable.table).filter((function(t){return"kp"===e.props.roleTable.getType(t)})),o=Object.keys(this.props.roleTable.table).filter((function(t){return"dicer"===e.props.roleTable.getType(t)})),i=Object.keys(this.props.roleTable.table).filter((function(t){return"pc"===e.props.roleTable.getType(t)})),a=function(t,n){return Object(se.jsx)(q.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(se.jsxs)(z.a,{style:{justifyContent:"center"},children:[Object(se.jsx)(P.a,{style:{minWidth:0,paddingLeft:9,paddingRight:9},children:Object(se.jsx)(H.a,{edge:"start",onClick:function(){return e.handleRoleFilterChange(t)},checked:e.props.logFilter.role[t],disabled:n})}),Object(se.jsx)(U.a,{id:"text-field-role"+t,color:"secondary",InputProps:{style:{color:e.props.roleTable.getColor(t)}},fullWidth:!0,error:!e.props.roleTable.getName(t),value:e.props.roleTable.getName(t),onChange:function(n){e.handleRoleNameChange(t,n.target.value)}},"text-"+t),Object(se.jsx)(P.a,{style:{minWidth:0,paddingLeft:9,paddingRight:9},children:Object(se.jsx)(de,{id:t,color:e.props.roleTable.getColor(t),onChangeComplete:function(n){e.handleColorChange(t,n.hex)}})},"icon-"+t)]},t)},t)};return[Object(se.jsxs)(O.a,{container:!0,children:[Object(se.jsx)(O.a,{item:!0,xs:!0,align:"right",children:Object(se.jsx)(v.a,{in:!0,timeout:1500,children:Object(se.jsxs)(K.a,{className:t.formControl,children:[Object(se.jsx)(_.a,{id:"kp-selection-checkbox-label",children:"Select KP"}),Object(se.jsx)(V.a,{labelId:"kp-selection-checkbox-label",id:"kp-selection-checkbox",multiple:!0,error:0===this.state.kpList.length,value:this.state.kpList,onChange:this.handleKpChange,input:Object(se.jsx)(G.a,{}),renderValue:function(n){return Object(se.jsx)("div",{className:t.chips,children:n.map((function(n){return Object(se.jsx)(J.a,{label:e.props.roleTable.getName(n),className:t.chip,size:"small"},n)}))})},MenuProps:he,children:Object.keys(this.props.roleTable.table).map((function(t){return e.state.dicerList.includes(t)?null:Object(se.jsxs)(Y.a,{value:t,children:[Object(se.jsx)(H.a,{checked:e.state.kpList.includes(t)}),Object(se.jsx)(Q.a,{primary:e.props.roleTable.getName(t)})]},t)}))}),Object(se.jsx)($.a,{error:!0,hidden:0!==this.state.kpList.length,children:"Must set at least one kp."})]})})}),Object(se.jsx)(O.a,{item:!0,xs:!0,align:"left",children:Object(se.jsx)(v.a,{in:!0,timeout:1500,children:Object(se.jsxs)(K.a,{className:t.formControl,children:[Object(se.jsx)(_.a,{id:"dicer-selection-checkbox-label",children:"Select dicer"}),Object(se.jsx)(V.a,{labelId:"dicer-selection-checkbox-label",id:"dicer-selection-checkbox",multiple:!0,error:0===this.state.dicerList.length,value:this.state.dicerList,onChange:this.handleDicerChange,input:Object(se.jsx)(G.a,{}),renderValue:function(n){return Object(se.jsx)("div",{className:t.chips,children:n.map((function(n){return Object(se.jsx)(J.a,{label:e.props.roleTable.getName(n),className:t.chip,size:"small"},n)}))})},MenuProps:he,children:Object.keys(this.props.roleTable.table).map((function(t){return e.state.kpList.includes(t)?null:Object(se.jsxs)(Y.a,{value:t,children:[Object(se.jsx)(H.a,{checked:e.state.dicerList.includes(t)}),Object(se.jsx)(Q.a,{primary:e.props.roleTable.getName(t)})]},t)}))}),Object(se.jsx)($.a,{error:!0,hidden:0!==this.state.dicerList.length,children:"Must set at least one dicer."})]})})})]},"kp-and-dicer-configurator-grid"),Object(se.jsx)(O.a,{container:!0,children:Object(se.jsx)(O.a,{item:!0,xs:!0,align:"center",children:Object(se.jsx)(v.a,{in:!0,timeout:1500,children:Object(se.jsxs)(X.a,{dense:!0,style:{maxWidth:"360px"},children:[0!==n.length&&Object(se.jsx)(v.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(se.jsx)(Z.a,{disableSticky:!0,style:{lineHeight:"28px"},children:"KP"},"kp")},"kp"),n.map((function(e){return a(e,!0)})),0!==o.length&&Object(se.jsx)(v.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(se.jsx)(Z.a,{disableSticky:!0,style:{lineHeight:"28px"},children:"Dicer"},"dicer")},"dicer"),o.map((function(e){return a(e,!0)})),0!==i.length&&Object(se.jsx)(v.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(se.jsx)(Z.a,{disableSticky:!0,style:{lineHeight:"28px"},children:"PC"},"pc")},"pc"),i.map((function(e){return a(e,!1)})),Object(se.jsx)(C.a,{variant:"middle"},"divider"),Object(se.jsx)(q.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(se.jsxs)(z.a,{button:!0,onClick:this.handleCommandFilterChange,children:[Object(se.jsx)(P.a,{children:Object(se.jsx)(H.a,{edge:"start",checked:this.props.logFilter.command},"command-checkbox")},"command-icon"),Object(se.jsx)(Q.a,{id:"label-command",primary:"Show Command"},"label-command")]},"command")},"command-checkbox"),Object(se.jsx)(q.a,{in:!0,timeout:1500,mountOnEnter:!0,unmountOnExit:!0,children:Object(se.jsxs)(z.a,{button:!0,onClick:this.handleCommentFilterChange,children:[Object(se.jsx)(P.a,{children:Object(se.jsx)(H.a,{edge:"start",checked:this.props.logFilter.comment},"comment-checkbox")},"comment-icon"),Object(se.jsx)(Q.a,{id:"label-comment",primary:"Show Comment"},"label-comment")]},"comment")},"comment-checkbox")]})})})},"name-and-color-configurator-grid"),Object(se.jsx)(O.a,{container:!0,style:{marginBottom:"1em"},children:Object(se.jsx)(O.a,{item:!0,xs:!0,align:"center",children:Object(se.jsx)(y.a,{variant:0===this.state.kpList.length&&0===this.state.dicerList.length?"outlined":"contained",color:"secondary",disabled:0===this.state.kpList.length||0===this.state.dicerList.length,endIcon:Object(se.jsx)(te.a,{}),onClick:this.props.onSubmit,children:"Render"},"render-button")})},"apply-button-grid")]}}]),n}(i.a.Component),pe=Object(ee.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:240},chips:{display:"flex",flexWrap:"wrap"},chip:{marginTop:2,marginRight:2,marginBottom:2,maxWidth:100,overflow:"hidden",label:{overflow:"hidden"}},noLabel:{marginTop:e.spacing(3)}}}),{withTheme:!0})(ue),be=n(57),me=n(339),ge=n(358),je=n(340),fe=n(338),xe=n(341),Oe=n(342),ye=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).collapsibleNodeArray=[],o.state={expanded:[]},o.handleToggle=o.handleToggle.bind(Object(b.a)(o)),o.collapseAll=o.collapseAll.bind(Object(b.a)(o)),o.expandAll=o.expandAll.bind(Object(b.a)(o)),o.initializeCollapsibleNodeArray(),o}return Object(p.a)(n,[{key:"initializeCollapsibleNodeArray",value:function(){var e=this;!function t(n){n.type===Ee&&Array.isArray(n.children)&&(n.collapsed&&e.collapsibleNodeArray.push(n.id.toString()),n.children.forEach((function(e){return t(e)})))}(this.props.node)}},{key:"handleToggle",value:function(e,t){this.setState({expanded:t})}},{key:"collapseAll",value:function(){this.setState({expanded:[]})}},{key:"expandAll",value:function(){console.log(this.collapsibleNodeArray),this.setState({expanded:this.collapsibleNodeArray})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=Object(ee.a)({root:{"&.MuiTreeItem-root:focus > .MuiTreeItem-content .MuiTreeItem-label":{background:"transparent"},"&.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label":{background:"transparent"},"&.MuiTreeItem-root > .MuiTreeItem-content:hover":{background:"transparent"},"&.MuiTreeItem-root > .MuiTreeItem-content:hover > .MuiTreeItem-label":{background:"transparent"}},group:{marginLeft:7,paddingLeft:18,borderLeft:"1px dashed #33333333"}})(ge.a);return this.props.node?[this.props.header.title&&Object(se.jsx)(be.a,{variant:"h4",style:{marginTop:"16px",marginBottom:"16px"},children:this.props.header.title},"title"),this.props.header.description&&Object(se.jsx)(be.a,{variant:"subtitle1",style:{whiteSpace:"pre-line",marginBottom:"16px",paddingLeft:"2em",paddingRight:"2em",color:"#666666"},children:this.props.header.description},"description"),Object(se.jsxs)(me.a,{variant:"outlined",size:"small",color:"primary",style:{marginBottom:"16px"},children:[Object(se.jsx)(y.a,{onClick:this.expandAll,children:"Expand all"}),Object(se.jsx)(y.a,{onClick:this.collapseAll,children:"Collapse all"})]},"button-group"),Object(se.jsx)(je.a,{className:t.root,defaultCollapseIcon:Object(se.jsx)(xe.a,{}),defaultExpanded:["root"],defaultExpandIcon:Object(se.jsx)(Oe.a,{}),disableSelection:!0,expanded:this.state.expanded,onNodeToggle:this.handleToggle,style:{marginBottom:"48px"},children:function t(o){if(o.type===Ee){if(Array.isArray(o.children)){if(o.collapsed){var i=o.role.map((function(t){return"pc"===e.props.roleTable.getType(t)?e.props.roleTable.getName(t):null})).filter((function(e){return e})),a=Object(se.jsx)(be.a,{style:{color:"#a2a2a2"},children:"{".concat(i.join(", "),"}")});return Object(se.jsxs)(n,{nodeId:o.id.toString(),label:a,children:[o.children.map((function(e){return t(e)})),Object(se.jsx)(n,{nodeId:o.id.toString()+"-collapse",label:Object(se.jsx)(be.a,{style:{color:"#a2a2a2"},children:"Click to Collapse"}),endIcon:Object(se.jsx)(fe.a,{}),onLabelClick:function(t){var n=e.state.expanded;n.splice(n.indexOf(o.id.toString()),1),e.handleToggle(t,n)}},o.id.toString()+"-collapse")]},o.id)}return o.children.map((function(e){return t(e)}))}return null}if(o.content)return Object(se.jsx)(be.a,{style:{color:e.props.roleTable.getColor(o.role),whiteSpace:"pre-line"},children:"<".concat(e.props.roleTable.getName(o.role),"> ").concat(o.content)},o.id)}(this.props.node)},"render-tree")]:null}}]),n}(i.a.Component),ve=Object(ee.a)((function(e){return{"@global":{".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label":{backgroundColor:"white"},".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label:hover, .MuiTreeItem-root.Mui-selected:focus > .MuiTreeItem-content .MuiTreeItem-label":{backgroundColor:"gray"}}}}),{withTheme:!0})(ye),Ce=n(343),ke=n(344),Te=n(345),we=n(346),Se=n(347),Re=Object(Ce.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3)}}}));function Fe(e){var t=e.children,n=Re(),o=Object(ke.a)({disableHysteresis:!0,threshold:100});return Object(se.jsx)(Te.a,{in:o,children:Object(se.jsx)("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:n.root,children:t})})}function Ie(e){return Object(se.jsx)(Fe,Object(ne.a)(Object(ne.a)({},e),{},{children:Object(se.jsx)(we.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(se.jsx)(Se.a,{})})}))}var Le=Symbol("Start"),Ne=Symbol("Start'"),Ee=Symbol("Block"),Me=Symbol("block-begin"),Ae=Symbol("block-end"),De=Symbol("ACC"),Be=Symbol("action"),We=Symbol("command"),qe=Symbol("comment"),ze=function e(t,n){var o=this;Object(j.a)(this,e),this.addChild=function(e){o.children.push(e)},this.type=t,this.content=n,this.children=[]},Pe=function e(t,n,o,i){var a=this;Object(j.a)(this,e),this.addChild=function(e){a.children.push(e)},this.id=t,this.type=n,this.role=o,this.content=i,this.children=[]},He=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).header={show_command:!1,show_comment:!1},o.state={selectedFile:null,parseTreeRoot:null,syntaxTreeRoot:null,filteredTreeRoot:null,roleTable:null,logFilter:{},showRoleConfigurator:!1,showLogRender:!1},o.handleFileChange=o.handleFileChange.bind(Object(b.a)(o)),o.handleFileRead=o.handleFileRead.bind(Object(b.a)(o)),o.handleFileUpload=o.handleFileUpload.bind(Object(b.a)(o)),o.handleRoleTableChange=o.handleRoleTableChange.bind(Object(b.a)(o)),o.handleLogFilterChange=o.handleLogFilterChange.bind(Object(b.a)(o)),o.filterNodeByRole=o.filterNodeByRole.bind(Object(b.a)(o)),o}return Object(p.a)(n,[{key:"parse",value:function(e){var t=0,n=function(){return e[t]},o=function(){return t+=1},i=function e(t){var o=n();if(o.type===S){if(t.addChild(new ze(Ee,null)),a(t.children[0]))return t.addChild(new ze(Ne,null)),e(t.children[1])}else{if(o.type!==F&&o.type!==I&&o.type!==L)return!0;if(t.addChild(new ze(De,null)),l(t.children[0]))return t.addChild(new ze(Ne,null)),e(t.children[1])}},a=function(e){var t=n();if(t.type===S){if(e.addChild(new ze(Me,t)),o(),e.addChild(new ze(Ne,null)),i(e.children[1])){if(e.addChild(new ze(Ae,n())),n().type===R)return o(),!0;console.log("Error parsing at ".concat(n(),", should be <block-end>."))}}else console.log("Error parsing at ".concat(n(),", should be <block-begin>."))},l=function(e){var t=n();return t.type===F?(e.addChild(new ze(Be,t)),o(),!0):t.type===I?(e.addChild(new ze(We,t)),o(),!0):t.type===L?(e.addChild(new ze(qe,t)),o(),!0):(console.log("Error parsing at ".concat(t,", should be <action> or <command> or <comment>.")),!1)},r=new ze(Le);if(function(e){var t=n();if(t.type===S){if(e.addChild(new ze(Ee,null)),a(e.children[0]))return e.addChild(new ze(Ne,null)),i(e.children[1])}else{if(t.type!==F&&t.type!==I&&t.type!==L)return console.log("Error parsing at ".concat(t,".")),!1;if(e.addChild(new ze(De,null)),l(e.children[0]))return e.addChild(new ze(Ne,null)),i(e.children[1])}}(r))return r;console.log("Failed to parse the code.")}},{key:"buildSyntaxTree",value:function(e){var t=1,n=new Pe(0,Ee,[],null);return function e(n,o){if(n){var i=function(e,n){if(e.type===Ee)n.addChild(new Pe(t,Ee,[],null));else{if(e.type!==Be&&e.type!==We&&e.type!==qe)return!1;n.addChild(new Pe(t,e.type,e.content.roleID,e.content.content))}return t+=1,n.children[n.children.length-1]}(n,o);i?n.children.forEach((function(t,n){return e(t,i)})):n.children.forEach((function(t,n){return e(t,o)}))}}(e,n),n}},{key:"updateRole",value:function(e){var t=this;if(e){if(e.type===Ee){var n=e.role;e.children.forEach((function(e,o){return n=n.concat(t.updateRole(e))})),e.role=Object(u.a)(new Set(n)).sort()}return e.role}return[]}},{key:"initializeLogFilter",value:function(){var e={};return this.state.syntaxTreeRoot.role.forEach((function(t){return e[t]=!0})),{role:e,command:this.header.show_command,comment:this.header.show_comment}}},{key:"handleFileChange",value:function(e){this.setState({selectedFile:e.target.files[0]})}},{key:"handleFileRead",value:function(e){var t=this,n=e.target.result,o=new W(n),i=o.analyze();this.header=o.header;var a=this.parse(i),l=this.buildSyntaxTree(a);this.setState({parseTreeRoot:a,syntaxTreeRoot:l,roleTable:o.roleTable},(function(){t.updateRole(t.state.syntaxTreeRoot);var e=t.initializeLogFilter();t.setState({logFilter:e,showRoleConfigurator:!0})}))}},{key:"handleFileUpload",value:function(){var e=new FileReader;e.onload=this.handleFileRead,e.readAsText(this.state.selectedFile)}},{key:"handleRoleTableChange",value:function(e){this.setState({roleTable:e})}},{key:"handleLogFilterChange",value:function(e){this.setState({logFilter:e})}},{key:"filterNodeByRole",value:function(){var e=this,t=[];Object.keys(this.state.logFilter.role).forEach((function(n){"pc"===e.state.roleTable.getType(n)&&e.state.logFilter.role[n]&&t.push(n)})),t=t.map((function(e){return parseInt(e)}));var n=x.a.cloneDeep(this.state.syntaxTreeRoot);!function n(o,i){if(o)if(o.children.slice(0).forEach((function(e,t){return n(e,o)})),o.type===Ee){if(o.collapsed=(r=t,c=o.role,!r.every((function(e){return c.includes(e)}))),0===o.children.length&&i||function(e,t){return!e.map((function(e){return t.includes(e)})).includes(!0)}(o.role,t)){var a=i.children.findIndex((function(e){return e.id===o.id}));i.children.splice(a,1),o=null}}else if(o.collapsed=!1,o.type===We&&!e.state.logFilter.command||o.type===qe&&!e.state.logFilter.comment){var l=i.children.findIndex((function(e){return e.id===o.id}));i.children.splice(l,1),o=null}var r,c}(n,null),this.updateRole(n),this.setState({filteredTreeRoot:n,showLogRender:!0})}},{key:"render",value:function(){return[Object(se.jsx)("div",{id:"back-to-top-anchor"},"back-to-top-anchor"),Object(se.jsx)(Ie,{},"back-to-top-button"),Object(se.jsxs)(O.a,{container:!0,spacing:1,direction:"column",style:{marginBottom:24},children:[Object(se.jsxs)(O.a,{item:!0,xs:!0,align:"center",children:[Object(se.jsx)("input",{hidden:!0,id:"contained-button-file",accept:"text/plain,.log",type:"file",onChange:this.handleFileChange}),Object(se.jsx)("label",{htmlFor:"contained-button-file",children:Object(se.jsx)(y.a,{variant:"outlined",color:"primary",component:"span",endIcon:Object(se.jsx)(k.a,{}),children:"Browse"})})]}),this.state.selectedFile&&Object(se.jsx)(v.a,{in:!0,timeout:1500,children:Object(se.jsx)(O.a,{item:!0,xs:!0,align:"center",children:Object(se.jsx)(y.a,{variant:"contained",color:"primary",component:"span",endIcon:Object(se.jsx)(T.a,{}),onClick:this.handleFileUpload,children:"Submit"})})})]},"handle-file-grid"),Object(se.jsx)(O.a,{container:!0,children:this.state.showRoleConfigurator&&Object(se.jsx)(pe,{roleTable:x.a.cloneDeep(this.state.roleTable),logFilter:this.state.logFilter,header:this.header,onRoleTableChange:this.handleRoleTableChange,onFilterChange:this.handleLogFilterChange,onSubmit:this.filterNodeByRole},"role-configurator")},"role-configurator-grid"),Object(se.jsx)(C.a,{hidden:!this.state.showLogRender},"divider"),Object(se.jsx)(d.a,{maxWidth:"md",children:this.state.showLogRender&&Object(se.jsx)(ve,{node:this.state.filteredTreeRoot,roleTable:this.state.roleTable,header:this.header},"render")},"log-render-container")]}}]),n}(i.a.Component),Ue=n(354),Ke=Object(r.a)({overrides:{MuiCssBaseline:{"@global":{body:{height:"100%",minHeight:"100%",width:"100%",fontFamily:"-apple-system, 'Helvetica Neue', Helvetica ,Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},code:{fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},header:{textAlign:"center",marginTop:"3em",marginBottom:"3em"},footer:{padding:"1.5em",marginTop:"auto",width:"100%",textAlign:"center"}}},Grid:{alignItems:"center",justifyContent:"center"},MuiDivider:{root:{margin:"12px"}}},palette:{primary:{main:"#717bd6"},secondary:{main:"#e8618c"}}});var _e=function(){return Object(se.jsxs)(c.a,{theme:Ke,children:[Object(se.jsx)(s.a,{}),Object(se.jsxs)(d.a,{maxWidth:"md",style:{minHeight:"82vh"},children:[Object(se.jsxs)("header",{children:[Object(se.jsx)("h1",{children:"es-logger"}),Object(se.jsx)("h3",{children:"A simple logger for CoC."})]}),Object(se.jsx)(He,{})]}),Object(se.jsxs)("footer",{id:"footer",className:"footer",children:[Object(se.jsx)(h.a,{href:"https://github.com/etosphere/es-logger",style:{color:"#907da2"},children:Object(se.jsx)(Ue.a,{fontSize:"small"})}),Object(se.jsx)("div",{style:{color:"#907da2"},children:"\xa9\xa02021\xa0ES"})]})]})},Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,359)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,a=t.getLCP,l=t.getTTFB;n(e),o(e),i(e),a(e),l(e)}))};l.a.render(Object(se.jsx)(_e,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Ve?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ge(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ge(t,e)}))}}(),Je()}},[[278,1,2]]]);
//# sourceMappingURL=main.be374f54.chunk.js.map