{"version":3,"sources":["Token.js","Role.js","LogScanner.js","ColorPicker.js","RoleConfigurator.js","LogFilter.js","LogRender.js","BackToTopButton.js","LogParser.js","App.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["BlockBegin","Symbol","BlockEnd","Action","Command","Comment","EOF","Token","id","tokenType","roleID","content","this","type","Role","name","color","RoleTable","table","nextRoleID","roleArray","Object","values","i","length","roleName","roleType","roleColor","existRoleID","getRoleIdByName","getRandomHSLAColor","minH","maxH","minS","maxS","minL","maxL","minA","maxA","getRandomNumber","low","high","Math","round","random","hue","saturation","lightness","alpha","LogScanner","rawLogData","tokenSequence","roleTable","logArray","split","map","str","trim","tokenID","lastRoleName","bufferActionContent","forEach","line","_","bracketContent","match","addRole","push","skipBracketContent","slice","tokenContent","ColorPicker","props","handleChange","setState","hex","state","variant","popupId","popupState","IconButton","style","component","bindTrigger","FormatColorText","Popover","bindPopover","anchorOrigin","vertical","horizontal","transformOrigin","onChange","onChangeComplete","React","Component","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","width","RoleConfigurator","kpList","dicerList","handleKpChange","bind","handleDicerChange","handleRoleNameChange","handleColorChange","handleClick","event","target","value","newRoleName","tempRoleTable","setName","newRoleColor","setColor","keys","setType","role","onSubmit","classes","Grid","container","item","xs","align","FormControl","className","formControl","InputLabel","Select","labelId","multiple","input","Input","renderValue","selected","chips","Chip","label","getName","chip","size","includes","MenuItem","Checkbox","checked","ListItemText","primary","List","ListItem","dense","disableGutters","justifyContent","TextField","InputProps","getColor","ListItemIcon","minWidth","marginBottom","Button","endIcon","Check","onClick","withStyles","theme","margin","spacing","maxWidth","display","flexWrap","marginLeft","marginRight","overflow","noLabel","marginTop","withTheme","LogFilter","logFilter","handleRoleChange","handleCommandChange","handleCommentChange","tempLogFilter","command","comment","filterElement","getType","sm","Description","LogRender","node","TreeView","root","defaultCollapseIcon","ExpandMore","defaultExpanded","defaultExpandIcon","ChevronRight","renderTree","Block","Typography","Array","isArray","children","collapsed","roleList","filter","labelContent","join","TreeItem","nodeId","toString","backgroundColor","useStyles","makeStyles","position","bottom","right","ScrollTop","trigger","useScrollTrigger","disableHysteresis","threshold","Zoom","in","anchor","ownerDocument","document","querySelector","scrollIntoView","behavior","block","BackToTopButton","Fab","KeyboardArrowUp","Start","StartPrime","ACC","ParseTreeNode","addChild","SyntaxTreeNode","LogParser","selectedFile","parseTreeRoot","syntaxTreeRoot","filteredTreeRoot","handleFileChange","handleFileRead","handleFileUpload","handleCheckboxChange","handleRoleTableChange","filterNodeByRole","tokenIndex","getToken","nextToken","parseStartPrime","token","parseBlock","parseACC","console","log","startNode","parseProgram","rootNode","nodeID","buildFullSyntaxTree","parseTreeNode","syntaxTreeNode","buildChildNode","originNode","buildRootNode","buildSyntaxTreeNode","child","concat","updateRole","Set","sort","roleDict","files","result","logScanner","analyze","parseTree","parse","syntaxTree","buildSyntaxTree","initializeLogFilter","fileReader","FileReader","onload","readAsText","newLogFilter","newRoleTable","reservedRoleArray","parseInt","filteredTree","cloneDeep","traverseFilter","parentNode","array1","array2","every","isIntersectionEmpty","toDeleteIndex","findIndex","splice","direction","hidden","htmlFor","Publish","Send","hasOwnProperty","Container","createTheme","overrides","MuiCssBaseline","body","height","fontFamily","code","header","textAlign","alignItems","App","ThemeProvider","CssBaseline","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.13a51fa1.chunk.js","sourcesContent":["export const BlockBegin = Symbol('block-begin');\r\nexport const BlockEnd = Symbol('block-end');\r\nexport const Action = Symbol('action');\r\nexport const Command = Symbol('command');\r\nexport const Comment = Symbol('comment');\r\nexport const EOF = Symbol('eof');\r\n\r\nexport default class Token {\r\n  constructor(id, tokenType, roleID, content) {\r\n    this.id = id;\r\n    this.type = tokenType;\r\n    this.roleID = roleID;\r\n    this.content = content;\r\n  }\r\n}","class Role {\r\n  constructor(id, name, type, color) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.type = type;  // \"kp\", \"dicer\", or \"pc\"\r\n    this.color = color;\r\n  }\r\n}\r\n\r\nclass RoleTable {\r\n  constructor() {\r\n    this.table = {};   // {id: Role}\r\n    this.nextRoleID = 0;\r\n  }\r\n\r\n  getName(id) {\r\n    if (id >= 0 && id < this.nextRoleID) {\r\n      return this.table[id].name;\r\n    }\r\n  }\r\n\r\n  setName(id, name) {\r\n    if (id >= 0 && id < this.nextRoleID) {\r\n      this.table[id].name = name;\r\n    }\r\n  }\r\n\r\n  getType(id) {\r\n    if (id >= 0 && id < this.nextRoleID) {\r\n      return this.table[id].type;\r\n    }\r\n  }\r\n\r\n  setType(id, type) {\r\n    if (id >= 0 && id < this.nextRoleID) {\r\n      this.table[id].type = type;\r\n    }\r\n  }\r\n\r\n  getColor(id) {\r\n    if (id >= 0 && id < this.nextRoleID) {\r\n      return this.table[id].color;\r\n    }\r\n  }\r\n\r\n  setColor(id, color) {\r\n    if (id >= 0 && id < this.nextRoleID) {\r\n      this.table[id].color = color;\r\n    }\r\n  }\r\n\r\n  getRoleIdByName(name) {\r\n    let roleArray = Object.values(this.table);\r\n    for (let i = 0; i < roleArray.length; i++) {\r\n      if (roleArray[i].name === name) {\r\n        return roleArray[i].id;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // add a role by its name and type and return its ID,\r\n  // except the name has already occurred in the role table (return its id)\r\n  addRole(roleName, roleType, roleColor) {\r\n    let existRoleID = this.getRoleIdByName(roleName);\r\n    if (existRoleID || existRoleID === 0) {\r\n      return existRoleID;\r\n    } else {\r\n      this.table[this.nextRoleID] = new Role(this.nextRoleID, roleName, roleType, roleColor);\r\n      this.nextRoleID += 1;\r\n      return this.nextRoleID - 1;\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  Role,\r\n  RoleTable,\r\n};","import Token, {BlockBegin, BlockEnd, Action, Command, Comment, EOF} from './Token';\r\nimport {RoleTable} from './Role';\r\n\r\nconst getRandomHSLAColor = (minH, maxH, minS, maxS, minL, maxL, minA, maxA) => {\r\n  const getRandomNumber = (low, high) => {\r\n    return Math.round(Math.random() * (high - low)) + low;\r\n  }\r\n\r\n  let hue = getRandomNumber(minH, maxH);\r\n  let saturation = getRandomNumber(minS, maxS);\r\n  let lightness = getRandomNumber(minL, maxL);\r\n  let alpha = getRandomNumber(minA * 100, maxA * 100) / 100;\r\n\r\n  return `hsl(${hue}, ${saturation}%, ${lightness}%, ${alpha})`;\r\n}\r\n\r\nclass LogScanner {\r\n  constructor(rawLogData) {\r\n    this.rawLogData = rawLogData;\r\n    this.tokenSequence = [];\r\n    this.roleTable = new RoleTable();\r\n  }\r\n\r\n  analyze() {\r\n    let logArray = this.rawLogData.split('\\n').map((str) => str.trim());\r\n    let tokenID = 0;\r\n    let lastRoleName = '';\r\n    let bufferActionContent = '';\r\n    logArray.forEach((line, _) => {\r\n      let bracketContent = line.match(/<.+>/);  // <xxx>\r\n      if (bracketContent) {\r\n        if (bufferActionContent !== '') {\r\n          let roleID = this.roleTable.addRole(lastRoleName, 'pc', getRandomHSLAColor(0, 360, 20, 80, 0, 75, 1, 1));\r\n          this.tokenSequence.push(new Token(tokenID, Action, roleID, bufferActionContent));\r\n          bufferActionContent = '';\r\n          tokenID += 1;\r\n        }\r\n        bracketContent = bracketContent[0];\r\n        let skipBracketContent = bracketContent.slice(1,\r\n          bracketContent.length - 1);  // <xxx> without <>\r\n        if (skipBracketContent === '{') {\r\n          this.tokenSequence.push(\r\n            new Token(tokenID, BlockBegin, null, null));\r\n        } else if (skipBracketContent === '}') {\r\n          this.tokenSequence.push(new Token(tokenID, BlockEnd, null, null));\r\n        } else {\r\n          let tokenContent = line.split('>')[1].trim();\r\n          let roleID = this.roleTable.addRole(skipBracketContent, 'pc', getRandomHSLAColor(0, 360, 20, 80, 0, 75, 1, 1));\r\n          if (tokenContent[0] === '(' || tokenContent[0] === '（') {\r\n            this.tokenSequence.push(\r\n              new Token(tokenID, Comment, roleID, tokenContent));\r\n            lastRoleName = '';\r\n          } else if (tokenContent[0] === '.') {\r\n            this.tokenSequence.push(\r\n              new Token(tokenID, Command, roleID, tokenContent));\r\n            lastRoleName = '';\r\n          } else {\r\n            bufferActionContent += tokenContent;\r\n            lastRoleName = skipBracketContent;\r\n            tokenID -= 1;\r\n          }\r\n        }\r\n      } else {\r\n        let roleID = this.roleTable.addRole(lastRoleName, 'pc', getRandomHSLAColor(0, 360, 20, 80, 0, 75, 1, 1));\r\n        if (line[0] === '(' || line[0] === '（') {\r\n          if (bufferActionContent !== '') {\r\n            this.tokenSequence.push(new Token(tokenID, Action, roleID, bufferActionContent));\r\n            bufferActionContent = '';\r\n            tokenID += 1;\r\n          }\r\n          this.tokenSequence.push(\r\n            new Token(tokenID, Comment, roleID, line));\r\n        } else if (line[0] === '.') {\r\n          if (bufferActionContent !== '') {\r\n            this.tokenSequence.push(new Token(tokenID, Action, roleID, bufferActionContent));\r\n            bufferActionContent = '';\r\n          }\r\n          this.tokenSequence.push(\r\n            new Token(tokenID, Command, roleID, line));\r\n        } else {\r\n          bufferActionContent += '\\n' + line;\r\n          tokenID -= 1;\r\n        }\r\n      }\r\n      tokenID += 1;\r\n    });\r\n    if (bufferActionContent !== '') {\r\n      let roleID = this.roleTable.addRole(lastRoleName, 'pc', getRandomHSLAColor(0, 360, 20, 80, 0, 75, 1, 1));\r\n      // push action token at last line\r\n      this.tokenSequence.push(new Token(tokenID, Action, roleID, bufferActionContent));\r\n      bufferActionContent = '';\r\n    }\r\n    this.tokenSequence.push(new Token(tokenID + 1, EOF, null, null));\r\n    return this.tokenSequence;\r\n  }\r\n}\r\n\r\nexport default LogScanner;","import React from 'react';\r\nimport {IconButton, Popover} from \"@material-ui/core\";\r\nimport {FormatColorText} from \"@material-ui/icons\";\r\nimport {SketchPicker} from \"react-color\";\r\nimport PopupState, {bindTrigger, bindPopover} from 'material-ui-popup-state';\r\n\r\nclass ColorPicker extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      color: this.props.color\r\n    }\r\n  }\r\n\r\n  handleChange = (color) => {\r\n    this.setState({color: color.hex})\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <PopupState variant=\"popover\" popupId=\"color-picker-popup-popover\">\r\n        {(popupState) => (\r\n          <div>\r\n            <IconButton\r\n              style={{color: this.state.color}}\r\n              aria-label=\"change color\"\r\n              component=\"span\"\r\n              {...bindTrigger(popupState)}>\r\n              <FormatColorText/>\r\n            </IconButton>\r\n            <Popover\r\n              {...bindPopover(popupState)}\r\n              anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'center',\r\n              }}\r\n              transformOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'center',\r\n              }}\r\n            >\r\n              <SketchPicker color={this.state.color}\r\n                            onChange={this.handleChange}\r\n                            onChangeComplete={this.props.onChangeComplete}/>\r\n            </Popover>\r\n          </div>\r\n        )}\r\n      </PopupState>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ColorPicker;","import React from \"react\";\r\nimport {\r\n  Input,\r\n  InputLabel,\r\n  MenuItem,\r\n  FormControl,\r\n  ListItemText,\r\n  Select,\r\n  Checkbox,\r\n  Chip,\r\n  TextField,\r\n  Button,\r\n  withStyles, List, ListItem, ListItemIcon, Grid\r\n} from \"@material-ui/core\";\r\nimport {Check} from \"@material-ui/icons\";\r\nimport ColorPicker from \"./ColorPicker\";\r\n\r\nconst styles = (theme) => ({\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n    maxWidth: 360\r\n  },\r\n  chips: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\"\r\n  },\r\n  chip: {\r\n    marginLeft: 2,\r\n    marginRight: 2,\r\n    maxWidth: 100,\r\n    overflow: 'hidden',\r\n    label: {\r\n      overflow: 'hidden',\r\n    }\r\n  },\r\n  noLabel: {\r\n    marginTop: theme.spacing(3)\r\n  }\r\n});\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 250\r\n    }\r\n  }\r\n};\r\n\r\nclass RoleConfigurator extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      kpList: [],\r\n      dicerList: [],\r\n      roleTable: this.props.roleTable,\r\n    }\r\n\r\n    this.handleKpChange = this.handleKpChange.bind(this);\r\n    this.handleDicerChange = this.handleDicerChange.bind(this);\r\n    this.handleRoleNameChange = this.handleRoleNameChange.bind(this);\r\n    this.handleColorChange = this.handleColorChange.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleKpChange(event) {\r\n    this.setState({\r\n      kpList: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleDicerChange(event) {\r\n    this.setState({\r\n      dicerList: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleRoleNameChange(roleID, newRoleName) {\r\n    let tempRoleTable = this.state.roleTable;\r\n    tempRoleTable.setName(roleID, newRoleName);\r\n    this.setState({roleTable: tempRoleTable});\r\n  }\r\n\r\n  handleColorChange(roleID, newRoleColor) {\r\n    let tempRoleTable = this.state.roleTable;\r\n    tempRoleTable.setColor(roleID, newRoleColor);\r\n    this.setState({roleTable: tempRoleTable});\r\n  }\r\n\r\n  handleClick() {\r\n    Object.keys(this.state.roleTable.table).forEach((roleID) => {\r\n      this.state.roleTable.setType(roleID, 'pc');\r\n    })\r\n    this.state.kpList.forEach((role) => {\r\n      this.state.roleTable.setType(role, 'kp');\r\n    });\r\n    this.state.dicerList.forEach((role) => {\r\n      this.state.roleTable.setType(role, 'dicer');\r\n    });\r\n    this.props.onSubmit(this.state.roleTable);\r\n  }\r\n\r\n  render() {\r\n    const classes = this.props.classes;\r\n\r\n    return ([\r\n      <Grid container key='kp-and-dicer-configurator-grid'>\r\n        <Grid item xs align='right'>\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel id=\"kp-selection-checkbox-label\">Select KP</InputLabel>\r\n            <Select\r\n              labelId=\"kp-selection-checkbox-label\"\r\n              id=\"kp-selection-checkbox\"\r\n              multiple\r\n              value={this.state.kpList}\r\n              onChange={this.handleKpChange}\r\n              input={<Input/>}\r\n              renderValue={(selected) => (\r\n                <div className={classes.chips}>\r\n                  {selected.map((value) => (\r\n                    <Chip key={value}\r\n                          label={this.state.roleTable.getName(value)}\r\n                          className={classes.chip}\r\n                          size=\"small\"/>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              MenuProps={MenuProps}\r\n            >\r\n              {Object.keys(this.state.roleTable.table).map((roleID) => {\r\n                if (!this.state.dicerList.includes(roleID)) {\r\n                  return (\r\n                    <MenuItem key={roleID} value={roleID}>\r\n                      <Checkbox checked={this.state.kpList.includes(roleID)}/>\r\n                      <ListItemText primary={this.state.roleTable.getName(roleID)}/>\r\n                    </MenuItem>\r\n                  )\r\n                } else {\r\n                  return null;\r\n                }\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs align='left'>\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel id=\"dicer-selection-checkbox-label\">Select dicer</InputLabel>\r\n            <Select\r\n              labelId=\"dicer-selection-checkbox-label\"\r\n              id=\"dicer-selection-checkbox\"\r\n              multiple\r\n              value={this.state.dicerList}\r\n              onChange={this.handleDicerChange}\r\n              input={<Input/>}\r\n              renderValue={(selected) => (\r\n                <div className={classes.chips}>\r\n                  {selected.map((value) => (\r\n                    <Chip key={value}\r\n                          label={this.state.roleTable.getName(value)}\r\n                          className={classes.chip}\r\n                          size=\"small\"/>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              MenuProps={MenuProps}\r\n            >\r\n              {Object.keys(this.state.roleTable.table).map((roleID) => {\r\n                if (!this.state.kpList.includes(roleID)) {\r\n                  return (\r\n                    <MenuItem key={roleID} value={roleID}>\r\n                      <Checkbox checked={this.state.dicerList.includes(roleID)}/>\r\n                      <ListItemText primary={this.state.roleTable.getName(roleID)}/>\r\n                    </MenuItem>\r\n                  );\r\n                } else {\r\n                  return null;\r\n                }\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>,\r\n      <Grid container key='name-and-color-configurator-grid'>\r\n        <Grid item xs align='center'>\r\n          <List>\r\n            {Object.keys(this.state.roleTable.table).map((roleID) => {\r\n              return (\r\n                <ListItem key={roleID} dense disableGutters={true} style={{justifyContent: 'center'}}>\r\n                  <TextField\r\n                    id={\"text-field-role\" + roleID}\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    key={'text-' + roleID}\r\n                    InputProps={{\r\n                      style: {color: this.state.roleTable.getColor(roleID)}\r\n                    }}\r\n                    value={this.state.roleTable.getName(roleID)}\r\n                    onChange={(event) => {\r\n                      this.handleRoleNameChange(roleID, event.target.value);\r\n                    }}\r\n                  />\r\n                  <ListItemIcon key={'icon-' + roleID} style={{minWidth: 0}}>\r\n                    <ColorPicker id={roleID}\r\n                                 color={this.state.roleTable.getColor(roleID)}\r\n                                 onChangeComplete={(color) => {this.handleColorChange(roleID, color.hex)}}/>\r\n                  </ListItemIcon>\r\n                </ListItem>);\r\n            })}\r\n          </List>\r\n        </Grid>\r\n      </Grid>,\r\n      <Grid container key='apply-button-grid' style={{marginBottom: '1em'}}>\r\n        <Grid item xs align='center'>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            endIcon={<Check/>}\r\n            onClick={this.handleClick}>\r\n            Apply\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true})(RoleConfigurator);","import React from 'react';\r\nimport {Button, Checkbox, Grid} from \"@material-ui/core\";\r\nimport {Description} from \"@material-ui/icons\";\r\n\r\nclass LogFilter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      logFilter: this.props.logFilter\r\n    }\r\n\r\n    this.handleRoleChange = this.handleRoleChange.bind(this);\r\n    this.handleCommandChange = this.handleCommandChange.bind(this);\r\n    this.handleCommentChange = this.handleCommentChange.bind(this);\r\n  }\r\n\r\n  handleRoleChange(event) {\r\n    let role = event.target.value;\r\n    let tempLogFilter = this.state.logFilter;\r\n    tempLogFilter.role[role] = !tempLogFilter.role[role];\r\n    this.setState({logFilter: tempLogFilter});\r\n  }\r\n\r\n  handleCommandChange() {\r\n    let tempLogFilter = this.state.logFilter;\r\n    tempLogFilter.command = !tempLogFilter.command;\r\n    this.setState({logFilter: tempLogFilter});\r\n  }\r\n\r\n  handleCommentChange() {\r\n    let tempLogFilter = this.state.logFilter;\r\n    tempLogFilter.comment = !tempLogFilter.comment;\r\n    this.setState({logFilter: tempLogFilter});\r\n  }\r\n\r\n  render() {\r\n    let filterElement = [];\r\n    if (this.state.logFilter.role) {\r\n      for (let role in this.state.logFilter.role) {\r\n        if (this.props.roleTable.getType(role) === 'pc') {\r\n          filterElement.push(\r\n            <label id={'label-role-' + role} key={'checkbox-role-' + role}>\r\n              <Checkbox id={'checkbox-role-' + role}\r\n                        checked={this.state.logFilter.role[role]}\r\n                        onChange={this.handleRoleChange}\r\n                        value={role}/>\r\n              {this.props.roleTable.getName(role)}\r\n            </label>,\r\n          );\r\n        }\r\n      }\r\n      filterElement.push(<br key='br-role'/>);\r\n      filterElement.push(\r\n        <label id=\"command\" key=\"command\">\r\n          <Checkbox id={'checkbox-command'}\r\n                 checked={this.state.logFilter.command}\r\n                 onChange={this.handleCommandChange} value={this.state.command}/>\r\n          Command\r\n        </label>);\r\n      filterElement.push(\r\n        <label id=\"comment\" key=\"comment\">\r\n          <Checkbox id={'checkbox-comment'}\r\n                 checked={this.state.logFilter.comment}\r\n                 onChange={this.handleCommentChange} value={this.state.command}/>\r\n          Comment\r\n        </label>,\r\n      );\r\n    }\r\n    if (filterElement.length !== 0) {\r\n      return (\r\n        <Grid container style={{marginBottom: '1em'}}>\r\n          <Grid item sm>\r\n            {filterElement}\r\n          </Grid>\r\n          <Grid item xs align='center'>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              component=\"span\"\r\n              endIcon={<Description/>}\r\n              onClick={this.props.onSubmit}>\r\n              Render\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    } else {\r\n      return <div/>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default LogFilter;","import React from \"react\";\r\nimport {Block} from \"./LogParser\";\r\nimport {Typography, withStyles} from \"@material-ui/core\";\r\nimport {TreeItem, TreeView} from \"@material-ui/lab\";\r\nimport {ChevronRight, ExpandMore} from \"@material-ui/icons\";\r\n\r\nconst styles = (theme) => ({\r\n  \"@global\": {\r\n    \".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\": {\r\n      backgroundColor: \"white\"\r\n    },\r\n    \".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label:hover, .MuiTreeItem-root.Mui-selected:focus > .MuiTreeItem-content .MuiTreeItem-label\": {\r\n      backgroundColor: \"gray\"\r\n    }\r\n  }\r\n});\r\n\r\nclass LogRender extends React.Component {\r\n  render() {\r\n    const classes = this.props.classes;\r\n\r\n    const renderTree = (node) => {\r\n      if (node.type !== Block) {\r\n        return <Typography key={node.id}\r\n                           style={{color: this.props.roleTable.getColor(node.role)}}>{`<${this.props.roleTable.getName(node.role)}> ${node.content}`}</Typography>;\r\n      } else {\r\n        if (Array.isArray(node.children)) {\r\n          if (node.collapsed) {\r\n            let roleList = node.role.map((roleID) => {\r\n              if (this.props.roleTable.getType(roleID) === 'pc') {\r\n                return this.props.roleTable.getName(roleID)\r\n              } else {\r\n                return null;\r\n              }\r\n            }).filter((roleName) => roleName);\r\n            let labelContent = <Typography\r\n              style={{color: '#a2a2a2'}}>{`---Click to Expand--- [${roleList.join(', ')}]`}</Typography>;\r\n            return (\r\n              <TreeItem key={node.id} nodeId={node.id.toString()} label={labelContent}>\r\n                {node.children.map((node) => renderTree(node))}\r\n              </TreeItem>\r\n            );\r\n          } else {\r\n            return node.children.map((node) => renderTree(node));\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.props.node) {\r\n      return (\r\n        <TreeView\r\n          className={classes.root}\r\n          defaultCollapseIcon={<ExpandMore/>}\r\n          defaultExpanded={['root']}\r\n          defaultExpandIcon={<ChevronRight/>}\r\n        >\r\n          {renderTree(this.props.node)}\r\n        </TreeView>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n    // let children = null;\r\n    // if (this.props.node && this.props.node.children !== 0) {\r\n    //   children = (\r\n    //     <ul style={{listStyleType: 'none', margin: 0}}>\r\n    //       {this.props.node.children.map((i) => (\r\n    //         <LogRender node={i} key={'log-node-' + i.id} roleTable={this.props.roleTable}/>\r\n    //       ))}\r\n    //     </ul>\r\n    //   );\r\n    //   if (this.props.node.type === Block) {\r\n    //     let blockRoles = this.props.node.role.map((roleID) => this.props.roleTable.getName(roleID)).join(', ');\r\n    //     if (this.props.node.id === 0) {\r\n    //       // not render the root Block node\r\n    //       return (<div>{children}</div>);\r\n    //     } else {\r\n    //       return (\r\n    //         <li>\r\n    //           <span>[{blockRoles}]</span>\r\n    //           {children}\r\n    //         </li>\r\n    //       );\r\n    //     }\r\n    //   } else {\r\n    //     return (\r\n    //       <li>\r\n    //         <span>&lt;{this.props.roleTable.getName(this.props.node.role)}&gt;</span> {this.props.node.content}\r\n    //         {children}\r\n    //       </li>\r\n    //     );\r\n    //   }\r\n    // } else {\r\n    //   return null;\r\n    // }\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true})(LogRender);","import React from \"react\";\r\nimport {Fab, Zoom, useScrollTrigger, makeStyles} from \"@material-ui/core\";\r\nimport {KeyboardArrowUp} from '@material-ui/icons'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(3),\r\n    right: theme.spacing(3)\r\n  }\r\n}));\r\n\r\nfunction ScrollTop(props) {\r\n  const { children } = props;\r\n  const classes = useStyles();\r\n  const trigger = useScrollTrigger({\r\n    disableHysteresis: true,\r\n    threshold: 100\r\n  });\r\n\r\n  const handleClick = (event) => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Zoom in={trigger}>\r\n      <div onClick={handleClick} role=\"presentation\" className={classes.root}>\r\n        {children}\r\n      </div>\r\n    </Zoom>\r\n  );\r\n}\r\n\r\nexport default function BackToTopButton(props) {\r\n  return (\r\n    <ScrollTop {...props}>\r\n      <Fab color=\"secondary\" size=\"small\" aria-label=\"scroll back to top\">\r\n        <KeyboardArrowUp />\r\n      </Fab>\r\n    </ScrollTop>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {Button, Container, Grid} from '@material-ui/core';\r\nimport {Publish, Send} from '@material-ui/icons';\r\nimport LogScanner from './LogScanner';\r\nimport * as Token from './Token';\r\nimport RoleConfigurator from \"./RoleConfigurator\";\r\nimport LogFilter from \"./LogFilter\";\r\nimport LogRender from \"./LogRender\";\r\nimport BackToTopButton from \"./BackToTopButton\";\r\n\r\nexport const Start = Symbol('Start');\r\nexport const StartPrime = Symbol('Start\\'');\r\nexport const Block = Symbol('Block');\r\nexport const BlockBegin = Symbol('block-begin');\r\nexport const BlockEnd = Symbol('block-end');\r\nexport const ACC = Symbol('ACC');\r\nexport const Action = Symbol('action');\r\nexport const Command = Symbol('command');\r\nexport const Comment = Symbol('comment');\r\n\r\nclass ParseTreeNode {\r\n  constructor(type, content) {\r\n    this.type = type;\r\n    this.content = content;\r\n    this.children = [];\r\n  }\r\n\r\n  addChild = (node) => {\r\n    this.children.push(node);\r\n  };\r\n}\r\n\r\nclass SyntaxTreeNode {\r\n  constructor(id, type, role, content) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.role = role;\r\n    this.content = content;\r\n    this.children = [];\r\n  }\r\n\r\n  addChild = (node) => {\r\n    this.children.push(node);\r\n  };\r\n}\r\n\r\nclass LogParser extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedFile: null,\r\n      parseTreeRoot: null,\r\n      syntaxTreeRoot: null,\r\n      filteredTreeRoot: null,\r\n      roleTable: null,\r\n      logFilter: {},   // e.g.: {\"role\": {0: true, 1: false, ...}], \"command\": true, \"comment\": true}\r\n    };\r\n    this.handleFileChange = this.handleFileChange.bind(this);\r\n    this.handleFileRead = this.handleFileRead.bind(this);\r\n    this.handleFileUpload = this.handleFileUpload.bind(this);\r\n    this.handleCheckboxChange = this.handleCheckboxChange.bind(this);\r\n    this.handleRoleTableChange = this.handleRoleTableChange.bind(this);\r\n    this.filterNodeByRole = this.filterNodeByRole.bind(this);\r\n  }\r\n\r\n  // syntax:\r\n  //\r\n  // Start -> Block Start' | ACC Start'\r\n  // Start' -> Block Start' | ACC Start' | empty\r\n  // Block -> block-begin Start' block-end\r\n  // ACC -> action | command | comment\r\n  parse(tokenSequence) {\r\n    let tokenIndex = 0;\r\n    const getToken = () => tokenSequence[tokenIndex];\r\n    const nextToken = () => tokenIndex += 1;\r\n\r\n    let parseProgram = (node) => {\r\n      let token = getToken();\r\n      if (token.type === Token.BlockBegin) {\r\n        node.addChild(new ParseTreeNode(Block, null));\r\n        if (parseBlock(node.children[0])) {\r\n          node.addChild(new ParseTreeNode(StartPrime, null));\r\n          return parseStartPrime(node.children[1]);\r\n        }\r\n      } else if (token.type === Token.Action || token.type === Token.Command ||\r\n        token.type === Token.Comment) {\r\n        node.addChild(new ParseTreeNode(ACC, null));\r\n        if (parseACC(node.children[0])) {\r\n          node.addChild(new ParseTreeNode(StartPrime, null));\r\n          return parseStartPrime(node.children[1]);\r\n        }\r\n      } else {\r\n        console.log(`Error parsing at ${token}.`);\r\n        return false;\r\n      }\r\n    };\r\n\r\n    let parseStartPrime = (node) => {\r\n      let token = getToken();\r\n      if (token.type === Token.BlockBegin) {\r\n        node.addChild(new ParseTreeNode(Block, null));\r\n        if (parseBlock(node.children[0])) {\r\n          node.addChild(new ParseTreeNode(StartPrime, null));\r\n          return parseStartPrime(node.children[1]);\r\n        }\r\n      } else if (token.type === Token.Action || token.type === Token.Command ||\r\n        token.type === Token.Comment) {\r\n        node.addChild(new ParseTreeNode(ACC, null));\r\n        if (parseACC(node.children[0])) {\r\n          node.addChild(new ParseTreeNode(StartPrime, null));\r\n          return parseStartPrime(node.children[1]);\r\n        }\r\n      } else {\r\n        return true;    // for Start' -> empty\r\n      }\r\n    };\r\n\r\n    let parseBlock = (node) => {\r\n      let token = getToken();\r\n      if (token.type === Token.BlockBegin) {\r\n        node.addChild(new ParseTreeNode(BlockBegin, token));\r\n        nextToken();\r\n        node.addChild(new ParseTreeNode(StartPrime, null));\r\n        if (parseStartPrime(node.children[1])) {\r\n          node.addChild(new ParseTreeNode(BlockEnd, getToken()));\r\n          if (getToken().type === Token.BlockEnd) {\r\n            nextToken();\r\n            return true;\r\n          } else {\r\n            console.log(\r\n              `Error parsing at ${getToken()}, should be <block-end>.`);\r\n          }\r\n        }\r\n      } else {\r\n        console.log(`Error parsing at ${getToken()}, should be <block-begin>.`);\r\n      }\r\n    };\r\n\r\n    let parseACC = (node) => {\r\n      let token = getToken();\r\n      if (token.type === Token.Action) {\r\n        node.addChild(new ParseTreeNode(Action, token));\r\n        nextToken();\r\n        return true;\r\n      } else if (token.type === Token.Command) {\r\n        node.addChild(new ParseTreeNode(Command, token));\r\n        nextToken();\r\n        return true;\r\n      } else if (token.type === Token.Comment) {\r\n        node.addChild(new ParseTreeNode(Comment, token));\r\n        nextToken();\r\n        return true;\r\n      } else {\r\n        console.log(\r\n          `Error parsing at ${token}, should be <action> or <command> or <comment>.`);\r\n        return false;\r\n      }\r\n    };\r\n\r\n    let startNode = new ParseTreeNode(Start);\r\n    if (parseProgram(startNode)) {\r\n      return startNode;\r\n    } else {\r\n      console.log('Failed to parse the code.');\r\n    }\r\n  }\r\n\r\n  buildSyntaxTree(rootNode) {\r\n    let nodeID = 1;\r\n    let buildSyntaxTreeNode = (originNode, buildRootNode) => {\r\n      if (originNode.type === Block) {\r\n        buildRootNode.addChild(new SyntaxTreeNode(nodeID, Block, [], null));\r\n      } else if (originNode.type === Action || originNode.type === Command ||\r\n        originNode.type === Comment) {\r\n        buildRootNode.addChild(\r\n          new SyntaxTreeNode(nodeID, originNode.type, originNode.content.roleID,\r\n            originNode.content.content));\r\n      } else {\r\n        // do nothing\r\n        return false;\r\n      }\r\n      nodeID += 1;\r\n      return buildRootNode.children[buildRootNode.children.length - 1];\r\n    };\r\n\r\n    let buildFullSyntaxTree = (parseTreeNode, syntaxTreeNode) => {\r\n      if (parseTreeNode) {\r\n        let buildChildNode = buildSyntaxTreeNode(parseTreeNode, syntaxTreeNode);\r\n        if (buildChildNode) {\r\n          parseTreeNode.children.forEach(\r\n            (child, _) => buildFullSyntaxTree(child, buildChildNode));\r\n        } else {\r\n          parseTreeNode.children.forEach(\r\n            (child, _) => buildFullSyntaxTree(child, syntaxTreeNode));\r\n        }\r\n      }\r\n    };\r\n\r\n    let syntaxTreeRoot = new SyntaxTreeNode(0, Block, [], null);  // global block containing all roles\r\n    buildFullSyntaxTree(rootNode, syntaxTreeRoot);\r\n    return syntaxTreeRoot;\r\n  }\r\n\r\n  // traverse syntax tree in post order to update \"role\" in Block nodes\r\n  updateRole(rootNode) {\r\n    if (rootNode) {\r\n      if (rootNode.type === Block) {\r\n        let roleArray = rootNode.role;\r\n        rootNode.children.forEach(\r\n          (child, _) => roleArray = roleArray.concat(this.updateRole(child)));\r\n        rootNode.role = [...new Set(roleArray)].sort();\r\n      }\r\n      return rootNode.role;\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  initializeLogFilter() {\r\n    let roleDict = {};\r\n    this.state.syntaxTreeRoot.role.forEach((role) => roleDict[role] = true);\r\n    let tempLogFilter = {\r\n      'role': roleDict,\r\n      'command': true,\r\n      'comment': true,\r\n    };\r\n    this.setState({logFilter: tempLogFilter});\r\n  }\r\n\r\n  handleFileChange(event) {\r\n    this.setState({\r\n      selectedFile: event.target.files[0],\r\n    });\r\n  }\r\n\r\n  handleFileRead(event) {\r\n    let content = event.target.result;\r\n    let logScanner = new LogScanner(content);\r\n    let tokenSequence = logScanner.analyze();\r\n    let parseTree = this.parse(tokenSequence);\r\n    let syntaxTree = this.buildSyntaxTree(parseTree);\r\n    this.setState({\r\n      parseTreeRoot: parseTree,\r\n      syntaxTreeRoot: syntaxTree,\r\n      roleTable: logScanner.roleTable,\r\n    });\r\n    this.updateRole(this.state.syntaxTreeRoot);\r\n    this.initializeLogFilter();\r\n  }\r\n\r\n  handleFileUpload() {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = this.handleFileRead;\r\n    fileReader.readAsText(this.state.selectedFile);\r\n  }\r\n\r\n  handleCheckboxChange(newLogFilter) {\r\n    this.setState({logFilter: newLogFilter});\r\n  }\r\n\r\n  handleRoleTableChange(newRoleTable) {\r\n    this.setState({roleTable: newRoleTable});\r\n  }\r\n\r\n  // post-order traversal to delete nodes add update collapse states according to role filter checkboxes\r\n  // deletion rule:\r\n  //   1. If none of the reserved roles appear in the Block (except kp and dicer), delete the Block (and its children) node.\r\n  //   2. If is a action / command / comment node and is filtered out according to the checkboxes, delete it.\r\n  // collapsing rule:\r\n  //   If there exists a reserved role that does not appear in the Block node, collapse the node.\r\n  filterNodeByRole() {\r\n    // get all reserved roles from rileFilter\r\n    let reservedRoleArray = [];\r\n    Object.keys(this.state.logFilter.role).forEach((roleID) => {\r\n      if (this.state.roleTable.getType(roleID) === 'pc' && this.state.logFilter.role[roleID]) {\r\n        reservedRoleArray.push(roleID);\r\n      }\r\n    });\r\n    reservedRoleArray = reservedRoleArray.map((roleID) => parseInt(roleID));\r\n\r\n    let isIntersectionEmpty = (array1, array2) => {\r\n      return !array1.map((item) => array2.includes(item)).includes(true);\r\n    };\r\n\r\n    let isSubsetOf = (array1, array2) => {\r\n      return array1.every((value) => array2.includes(value));\r\n    }\r\n\r\n    let filteredTree = _.cloneDeep(this.state.syntaxTreeRoot);\r\n\r\n    let traverseFilter = (node, parentNode) => {\r\n      if (node) {\r\n        // make a clone to prevent wrong index made by deletion in iteration\r\n        node.children.slice(0)\r\n          .forEach((child, _) => traverseFilter(child, node));\r\n        if (node.type === Block) {\r\n          node.collapsed = !isSubsetOf(reservedRoleArray, node.role);\r\n          if ((node.children.length === 0 && parentNode) ||\r\n            isIntersectionEmpty(node.role, reservedRoleArray)) {\r\n            // Block is empty or no reserved roles appear\r\n            let toDeleteIndex = parentNode.children.findIndex(\r\n              (child) => child.id === node.id);\r\n            parentNode.children.splice(toDeleteIndex, 1);\r\n            node = null;\r\n          }\r\n        } else {\r\n          node.collapsed = false;\r\n          // check for filtering command / comment\r\n          if ((node.type === Command && (!this.state.logFilter.command)) ||\r\n            (node.type === Comment && (!this.state.logFilter.comment))) {\r\n            let toDeleteIndex = parentNode.children.findIndex(\r\n              (child) => child.id === node.id);\r\n            parentNode.children.splice(toDeleteIndex, 1);\r\n            node = null;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    traverseFilter(filteredTree, null);\r\n    this.updateRole(filteredTree);\r\n    this.setState({filteredTreeRoot: filteredTree});\r\n  }\r\n\r\n  render() {\r\n    return ([\r\n      <div id=\"back-to-top-anchor\" key='back-to-top-anchor'/>,\r\n      <BackToTopButton key='back-to-top-button'/>,\r\n      <Grid key='handle-file-grid' container spacing={1} direction='column'>\r\n        <Grid item xs align='center'>\r\n          <input\r\n            hidden\r\n            id=\"contained-button-file\"\r\n            multiple\r\n            type=\"file\"\r\n            onChange={this.handleFileChange}\r\n          />\r\n          <label htmlFor=\"contained-button-file\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"default\"\r\n              component=\"span\"\r\n              endIcon={<Publish/>}\r\n            >\r\n              Browse\r\n            </Button>\r\n          </label>\r\n        </Grid>\r\n        {this.state.selectedFile &&\r\n        <Grid item xs align='center'>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            component=\"span\"\r\n            endIcon={<Send/>}\r\n            onClick={this.handleFileUpload}>\r\n            Submit\r\n          </Button>\r\n        </Grid>}\r\n      </Grid>,\r\n      <Grid container key='role-configurator-grid'>\r\n        {this.state.roleTable &&\r\n        <RoleConfigurator roleTable={this.state.roleTable}\r\n                          onSubmit={this.handleRoleTableChange}/>\r\n        }\r\n      </Grid>,\r\n      <hr hidden={!this.state.roleTable} key='hr'/>,\r\n      <Grid container key='role-filter-grid'>\r\n        {this.state.logFilter.hasOwnProperty('role') &&\r\n        <LogFilter key='filter'\r\n                   logFilter={this.state.logFilter}\r\n                   roleTable={this.state.roleTable}\r\n                   onChange={this.handleCheckboxChange}\r\n                   onSubmit={this.filterNodeByRole}/>\r\n        }\r\n      </Grid>,\r\n      <Container key='log-render-container' maxWidth=\"md\">\r\n        {Object.keys(this.state.logFilter).length > 0 &&\r\n        <LogRender key='render'\r\n                   node={this.state.filteredTreeRoot}\r\n                   roleTable={this.state.roleTable}/>}\r\n      </Container>\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default LogParser;","import {createTheme, ThemeProvider, CssBaseline, Container} from \"@material-ui/core\";\r\nimport LogParser from './LogParser';\r\n\r\nconst theme = createTheme({\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      \"@global\": {\r\n        body: {\r\n          height: '100%',\r\n          width: '100%',\r\n          fontFamily: \"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif\",\r\n          '-webkit-font-smoothing': 'antialiased',\r\n          '-moz-osx-font-smoothing': 'grayscale',\r\n        },\r\n        code: {\r\n          fontFamily: \"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace\",\r\n        },\r\n        header: {\r\n          textAlign: 'center',\r\n          marginBottom: '2em',\r\n        }\r\n      }\r\n    },\r\n    Grid: {\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    }\r\n  },\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Container maxWidth=\"md\">\r\n        <header>\r\n          <h1>\r\n            es-logger\r\n          </h1>\r\n          <h3>\r\n            A simple logger for CoC.\r\n          </h3>\r\n        </header>\r\n        <LogParser />\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import './index.css';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\nserviceWorkerRegistration.register();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}