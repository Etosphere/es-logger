(this["webpackJsonpes-logger"]=this["webpackJsonpes-logger"]||[]).push([[0],{15:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var i=n(3),l=n.n(i),r=n(8),a=n.n(r),o=(n(15),n(10)),c=n(4),h=n(2),u=n(6),d=n(5),s=n(1),p=n(9),f=n.n(p),b=Symbol("block-begin"),y=Symbol("block-end"),g=Symbol("action"),v=Symbol("command"),j=Symbol("comment"),m=Symbol("eof"),C=function e(t,n,i,l){Object(s.a)(this,e),this.id=t,this.type=n,this.role=i,this.content=l},S=function(){function e(t){Object(s.a)(this,e),this.rawLogData=t,this.tokenSequence=[]}return Object(c.a)(e,[{key:"analyze",value:function(){var e=this,t=this.rawLogData.split("\n").map((function(e){return e.trim()})),n=0,i="",l="";return t.forEach((function(t,r){var a=t.match(/<.+>/);if(a){""!==l&&(e.tokenSequence.push(new C(n,g,i,l)),l="");var o=(a=a[0]).slice(1,a.length-1);if("{"===o)e.tokenSequence.push(new C(n,b,null,null));else if("}"===o)e.tokenSequence.push(new C(n,y,null,null));else{var c=t.split(">")[1].trim();"("===c[0]||"\uff08"===c[0]?(e.tokenSequence.push(new C(n,j,o,c)),i=""):"."===c[0]?(e.tokenSequence.push(new C(n,v,o,c)),i=""):(l+=c,i=o)}}else"("===t[0]||"\uff08"===t[0]?(""!==l&&(e.tokenSequence.push(new C(n,g,i,l)),l=""),e.tokenSequence.push(new C(n,j,i,t))):"."===t[0]?(""!==l&&(e.tokenSequence.push(new C(n,g,i,l)),l=""),e.tokenSequence.push(new C(n,v,i,t))):l+="\n"+t;n+=1})),this.tokenSequence.push(new C(n,m,null,null)),this.tokenSequence}}]),e}(),k=n(0),O=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).handleChange=i.handleChange.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"handleChange",value:function(e){var t=e.target.attributes.getNamedItem("data-role").value,n=e.target.attributes.getNamedItem("data-node-type").value,i=this.props.roleFilter;i[t][n]=!i[t][n],this.props.onChange(i)}},{key:"render",value:function(){var e=this,t=[];return Object.keys(this.props.roleFilter).forEach((function(n){var i=e.props.roleFilter[n],l=[];Object.keys(i).forEach((function(t){var r=i[t];l.push(Object(k.jsxs)("label",{id:"label-"+n+"-"+t,children:[t,Object(k.jsx)("input",{type:"checkbox",id:"checkbox-"+n+"-"+t,"data-role":n,"data-node-type":t,checked:e.props.roleFilter[n][t],onChange:e.handleChange,value:r})]},t))})),t.push(Object(k.jsxs)("div",{id:"div-"+n,children:[n,": ",l]},n))})),0!==t.length?Object(k.jsxs)("form",{onSubmit:this.props.onSubmit,children:[t,Object(k.jsx)("input",{type:"submit",value:"Submit"})]}):Object(k.jsx)("div",{})}}]),n}(l.a.Component),w=Symbol("Start"),x=Symbol("Start'"),F=Symbol("Block"),R=Symbol("block-begin"),T=Symbol("block-end"),E=Symbol("ACC"),q=Symbol("action"),L=Symbol("command"),N=Symbol("comment"),I=function e(t,n){var i=this;Object(s.a)(this,e),this.addChild=function(e){i.children.push(e)},this.type=t,this.content=n,this.children=[]},D=function e(t,n,i,l){var r=this;Object(s.a)(this,e),this.addChild=function(e){r.children.push(e)},this.id=t,this.type=n,this.role=i,this.content=l,this.children=[]},M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={selectedFile:null,parseTreeRoot:null,syntaxTreeRoot:null,roleFilter:{},outputHTML:""},i.handleFileChange=i.handleFileChange.bind(Object(h.a)(i)),i.handleFileRead=i.handleFileRead.bind(Object(h.a)(i)),i.handleFileUpload=i.handleFileUpload.bind(Object(h.a)(i)),i.handleCheckboxChange=i.handleCheckboxChange.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"parse",value:function(e){var t=0,n=function(){return e[t]},i=function(){return t+=1},l=function e(t){var i=n();if(i.type===b){if(t.addChild(new I(F,null)),r(t.children[0]))return t.addChild(new I(x,null)),e(t.children[1])}else{if(i.type!==g&&i.type!==v&&i.type!==j)return!0;if(t.addChild(new I(E,null)),a(t.children[0]))return t.addChild(new I(x,null)),e(t.children[1])}},r=function(e){var t=n();if(t.type===b){if(e.addChild(new I(R,t)),i(),e.addChild(new I(x,null)),l(e.children[1])){if(e.addChild(new I(T,n())),n().type===y)return i(),!0;console.log("Error parsing at ".concat(n(),", should be <block-end>."))}}else console.log("Error parsing at ".concat(n(),", should be <block-begin>."))},a=function(e){var t=n();return t.type===g?(e.addChild(new I(q,t)),i(),!0):t.type===v?(e.addChild(new I(L,t)),i(),!0):t.type===j?(e.addChild(new I(N,t)),i(),!0):(console.log("Error parsing at ".concat(t,", should be <action> or <command> or <comment>.")),!1)},o=new I(w);if(function(e){var t=n();if(t.type===b){if(e.addChild(new I(F,null)),r(e.children[0]))return e.addChild(new I(x,null)),l(e.children[1])}else{if(t.type!==g&&t.type!==v&&t.type!==j)return console.log("Error parsing at ".concat(t,".")),!1;if(e.addChild(new I(E,null)),a(e.children[0]))return e.addChild(new I(x,null)),l(e.children[1])}}(o))return o;console.log("Failed to parse the code.")}},{key:"buildSyntaxTree",value:function(e){var t=1,n=function e(n,i){if(n){var l=function(e,n){if(e.type===F)n.addChild(new D(t,F,[],null));else{if(e.type!==q&&e.type!==L&&e.type!==N)return!1;n.addChild(new D(t,e.type,e.content.role,e.content.content))}return t+=1,n.children[n.children.length-1]}(n,i);l?n.children.forEach((function(t,n){return e(t,l)})):n.children.forEach((function(t,n){return e(t,i)}))}},i=new D(0,F,[],null);return n(e,i),i.children!==[]?i.children[0]:i}},{key:"updateRole",value:function(e){var t=this;if(e){if(e.type===F){var n=e.role;e.children.forEach((function(e,i){return n=n.concat(t.updateRole(e))})),e.role=Object(o.a)(new Set(n)).sort()}return e.role}return[]}},{key:"initializeRoleFilter",value:function(){var e={};this.state.syntaxTreeRoot.role.forEach((function(t){e[t]={action:!0,command:!0,comment:!0}})),this.setState({roleFilter:e})}},{key:"handleFileChange",value:function(e){this.setState({selectedFile:e.target.files[0]})}},{key:"handleFileRead",value:function(e){var t=e.target.result,n=new S(t).analyze(),i=this.parse(n),l=this.buildSyntaxTree(i);this.setState({parseTreeRoot:i,syntaxTreeRoot:l,outputHTML:JSON.stringify(l,null,4)}),this.updateRole(this.state.syntaxTreeRoot),this.initializeRoleFilter()}},{key:"handleFileUpload",value:function(e){e.preventDefault();var t=new FileReader;t.onload=this.handleFileRead,t.readAsText(this.state.selectedFile)}},{key:"handleCheckboxChange",value:function(e){this.setState({roleFilter:e})}},{key:"filterNodeByRole",value:function(){var e=this,t=f.a.cloneDeep(this.state.syntaxTreeRoot);!function t(n,i){if(n)if(n.children.slice(0).forEach((function(e,i){return t(e,n)})),n.type===F&&0===n.children.length&&i){var l=i.children.findIndex((function(e){return e.id===n.id}));i.children.splice(l,1),n=null}else if(n.type!==F){var r=n.type.toString();if(r=r.substring(7,r.length-1),!e.state.roleFilter[n.role][r]){var a=i.children.findIndex((function(e){return e.id===n.id}));i.children.splice(a,1),n=null}}}(t,null),this.setState({outputHTML:JSON.stringify(t,null,4)})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("input",{type:"file",onChange:this.handleFileChange}),Object(k.jsx)("input",{type:"button",value:"Upload",onClick:this.handleFileUpload})]}),Object(k.jsx)(O,{roleFilter:this.state.roleFilter,onChange:this.handleCheckboxChange,onSubmit:function(t){t.preventDefault(),e.filterNodeByRole()}}),Object(k.jsx)("pre",{id:"output",dangerouslySetInnerHTML:{__html:this.state.outputHTML}})]})}}]),n}(l.a.Component);var A=function(){return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsxs)("header",{className:"App-header",children:[Object(k.jsx)("h1",{children:"es-logger"}),Object(k.jsx)("h3",{children:"A simple logger for CoC."})]}),Object(k.jsx)(M,{})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,i=t.getFID,l=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),l(e),r(e),a(e)}))};a.a.render(Object(k.jsx)(l.a.StrictMode,{children:Object(k.jsx)(A,{})}),document.getElementById("root")),B()}},[[19,1,2]]]);
//# sourceMappingURL=main.58052ce9.chunk.js.map